"use strict";(self.webpackChunkwebforms_ui=self.webpackChunkwebforms_ui||[]).push([[503],{6697:function(e,n,t){t(2791);var a=t(9526),i=t(184);n.Z=function(e){return(0,i.jsx)(a.Z,{elevation:3,style:{margin:"1rem 0"},children:(0,i.jsxs)("pre",{style:{background:"#fff",fontSize:"1rem",padding:"1.5rem"},children:[(0,i.jsx)("strong",{children:"props"})," ="," ",JSON.stringify(e,null,2)]})})}},4345:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(1413),i=t(2791),r=t(8596),l=t(9439),s=t(4569),c=t.n(s),d=t(1422),o=t(3168),_=t(184),u=function(e){var n=(0,o.$)().i18n,t=e.documentName,a=e.language,r=void 0===a?"".concat(n.language,"_ES"):a,s=i.useState(),u=(0,l.Z)(s,2),T=u[0],m=u[1];return i.useEffect((function(){var e="".concat("/static/webforms","/static/docs/").concat(r.slice(0,2),"/").concat(t,".html");m(void 0),c()({method:"GET",url:e}).then((function(e){m(null===e||void 0===e?void 0:e.data)})).catch((function(n){console.log("Error retrieving text ".concat(e))}))}),[t,r]),void 0===T?(0,_.jsx)(d.Z,{}):(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:T}})},T=u,m=(0,r.Z)((function(e){return{container:{"& a":{color:e.palette.text.secondary},"& h2":{fontSize:"1.25rem"},"& .pujar a":{fontSize:"1rem"},"& .sagnia":{paddingLeft:"1rem"}}}})),x=function(e){var n=m();return(0,_.jsx)("span",{className:n.container,children:(0,_.jsx)(T,(0,a.Z)({},e))})}},3460:function(e,n,t){t(2791);var a=t(8596),i=t(184);n.Z=function(e){e.variant;var n=e.children,t=e.className,a=r();return(0,i.jsx)("div",{className:"".concat(a.card," ").concat(t||""),children:n})};var r=(0,a.Z)((function(e){return{card:{width:"100%",background:"#fff",color:"#4d4d4d",fontSize:"14px",padding:"1.25rem 1.25rem",margin:"0 0 .5em 0",p:{lineHeight:"1.5"},"& p:first-child":{marginTop:0},"& p:last-child":{marginBottom:0},"& li":{marginBottom:"0.5rem",lineHeight:"1.5"}}}}))},4301:function(e,n,t){t(2791);var a=t(8596),i=t(184);n.Z=function(e){e.variant;var n=e.children,t=r();return(0,i.jsx)("h3",{className:t.header,children:n})};var r=(0,a.Z)((function(e){return{header:{width:"100%",background:"#fff",color:"#96b633",padding:"1rem 1.5rem",margin:"0 0 .5em 0",fontSize:"18px",textTransform:"uppercase"}}}))},7633:function(e,n,t){t(2791);var a=t(8596),i=t(184);n.Z=function(e){var n=e.label,t=void 0===n?"":n,a=e.children,l=e.isHighlight,s=r();return(0,i.jsxs)("div",{className:s.row,children:[(0,i.jsx)("div",{className:l?s.highlight:s.label,children:t}),(0,i.jsx)("div",{className:s.field,children:a})]})};var r=(0,a.Z)((function(e){return{row:{width:"100%",display:"flex"},label:{background:"#cccc",borderRight:"5px #f2f2f2 solid",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 25%",maxWidth:"25%",display:"flex",alignItems:"center"},highlight:{background:"#cccc",borderRight:"5px #f2f2f2 solid",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 25%",maxWidth:"25%",display:"flex",alignItems:"center",fontWeight:"bold",color:e.palette.primary.main},field:{background:"#fff",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 75%",maxWidth:"75%","& p":{margin:0}}}}))},7162:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ie}});var a=t(1413),i=t(4165),r=t(5861),l=t(9439),s=t(2791),c=t(3168),d=t(7325),o=t(5173),_=t(2797),u=t(7689),T=t(8596),m=t(2130),x=t(6513),E=t(4265),f=t(5720),I=t(3712),h=t(9526),p=t(8302),A=t(2124),N=t(3925),g=t(7892),R=t.n(g),v=(t(3195),t(2563),t(6697)),S=t(9329),D=t(6716),C=t(2439),j=t(7633),O=t(184),Z=function(e){var n=(0,c.$)().t,t=b(),a=e.contract,i=e.currentTariff,r=e.targetTariff;return(0,O.jsxs)("div",{className:t.root,children:[(0,O.jsx)(j.Z,{label:n("CONTRACT"),children:(0,O.jsx)("p",{children:a})}),(0,O.jsx)(j.Z,{label:n("CURRENT_TARIFF"),children:i}),(0,O.jsx)(j.Z,{isHighlight:!0,label:n("TARIFF_TO_CONTRACT"),children:r||n("TARIFF_CHANGE_NOT_AVAILABLE")})]})},b=(0,T.Z)((function(e){return{root:{width:"100%",marginBottom:"0.5rem"},highlight:{color:e.palette.text.primary}}})),L=t(5247),P=t(7447),F=t(4135),M=t(1288),U=t(6782),X=t(4301),y=t(442),H=t(4345),k=t(8182),w=(0,T.Z)((function(e){return{field:{display:"flex",alignItems:"center",marginBottom:e.spacing(.8),"& .field__value":{flexGrow:1}},label:{textTransform:"uppercase",paddingRight:"12px",fontSize:"13px",fontWeight:400,color:"rgba(0, 0, 0, 0.54)"},value:{fontSize:"13px"}}})),B=function(e){var n=e.label,t=e.value,a=w();return(0,O.jsxs)("div",{className:(0,k.Z)(a.field),children:[!1!==n&&(0,O.jsx)("div",{className:"field__title",children:(0,O.jsx)(p.Z,{className:a.label,variant:"subtitle2",children:(0,O.jsx)(O.Fragment,{children:n})})}),(0,O.jsx)("div",{className:(0,k.Z)("field__value"),children:(0,O.jsx)(p.Z,{id:n+"__value",className:a.value,variant:"body2",children:(0,O.jsx)(O.Fragment,{children:t})})})]})},G=(0,T.Z)((function(e){return{root:{backgroundColor:"white",padding:"24px"},withoutLabel:{marginTop:e.spacing(1)},sectionTitle:{fontSize:"16px",fontWeight:500,textTransform:"uppercase",marginTop:e.spacing(3),marginBottom:e.spacing(1.2)},divider:{marginTop:"12px",marginLeft:0,marginRight:"32px"},dividerBottom:{marginTop:"10px",marginBottom:"10px",marginLeft:0,marginRight:"32px"},prices:{marginBottom:"10px",display:"flex",flexDirection:"column","& span":{paddingRight:"16px"}}}})),z=function(e){var n=G(),t=(0,c.$)().t,a=e.contractValues,i=e.values,r=e.open,l=e.indexadaTermsAccepted,s=e.handleIndexadaLegalTermsAccepted,d=e.indexadaLegalTermsAccepted,o=e.handleClick,_=e.handleAccept,u=e.handleClose,T=e.handleIndexadaTermsAccepted,m=e.targetTariff,x=e.isTariff20,f=e.isTariffIndexed,I=e.isIndexedPilotOngoing,h=JSON.parse(a.powers);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(X.Z,{children:t("REVIEW_TITLE")}),(0,O.jsxs)(M.Z,{container:!0,className:n.root,children:[(0,O.jsx)(M.Z,{item:!0,xs:12,children:(0,O.jsx)(p.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:t("REVIEW_DESCRIPTION")}})}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("SUMMARY_GROUP_PROCESS")}),(0,O.jsx)(B,{value:t("PROCESS_TYPE_TARIFF_CHANGE")})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("SUPPLY")}),(0,O.jsx)(B,{label:t("CUPS_LABEL"),value:null===a||void 0===a?void 0:a.cups}),(0,O.jsx)(B,{label:t("ADDRESS"),value:null===a||void 0===a?void 0:a.address})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(P.Z,{variant:"middle",className:n.divider}),(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("HOLDER")}),(0,O.jsx)(B,{label:"NIF",value:null===a||void 0===a?void 0:a.owner_vat}),(0,O.jsx)(B,{label:t("NAME"),value:null===a||void 0===a?void 0:a.owner_name})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(P.Z,{variant:"middle",className:n.divider}),(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("CONTACT")}),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(B,{label:t("PHONE"),value:null===a||void 0===a?void 0:a.owner_phone}),(0,O.jsx)(B,{label:t("EMAIL"),value:null===a||void 0===a?void 0:a.owner_email}),(0,O.jsx)(B,{label:t("LANGUAGE"),value:null===a||void 0===a?void 0:a.language})]})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(P.Z,{variant:"middle",className:n.divider}),(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("SUMMARY_GROUP_TECHNICAL")}),(0,O.jsx)(B,{label:t("FARE"),value:m}),(0,O.jsx)(E.Z,{id:"tarif_powers",children:x?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(B,{label:t("PEAK"),value:h[0].power.replaceAll('"',"")}),(0,O.jsx)(B,{label:t("VALLEY"),value:h[1].power.replaceAll('"',"")})]}):(0,O.jsx)(O.Fragment,{children:h.map((function(e){return(0,O.jsx)(B,{label:e.value,value:e.power.replaceAll('"',"")},e.value)}))})})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(P.Z,{variant:"middle",className:n.divider}),(0,O.jsx)(p.Z,{className:n.sectionTitle,variant:"h6",children:t("SUMMARY_GROUP_PAYMENT")}),(0,O.jsx)(B,{label:t("IBAN"),value:null===a||void 0===a?void 0:a.iban}),(0,O.jsx)(B,{label:t("VOLUNTARY_CENT"),value:null!==a&&void 0!==a&&a.donation?"S\xed":"No"})]}),(0,O.jsx)(M.Z,{item:!0,xs:12,children:(0,O.jsx)(U.Z,{className:n.withoutLabel,dangerouslySetInnerHTML:{__html:t("HELPER_TEXT_MODIFY_DATA")}})})]}),(0,O.jsxs)(M.Z,{container:!0,className:n.root,children:[(0,O.jsx)(y.Z,{title:t("GENERAL_TERMS"),open:r,onAccept:_,onClose:u,children:(0,O.jsx)(H.Z,{documentName:f?"general-contract-terms":"general-and-indexed-specific-terms"})}),(0,O.jsxs)(M.Z,{item:!0,xs:12,children:[(0,O.jsx)(F.Z,{control:(0,O.jsx)(L.Z,{name:"terms_accepted",id:"change-tarif-terms-check",onClick:o,checked:i.terms_accepted,color:"primary"}),label:(0,O.jsx)(p.Z,{variant:"body2",dangerouslySetInnerHTML:{__html:t(f?"PERIODS_ACCEPT_CONDITIONS":"INDEXED_ACCEPT_CONDITIONS")}})}),(0,O.jsx)(P.Z,{variant:"middle",className:n.dividerBottom})]}),(0,O.jsxs)(M.Z,{item:!0,xs:12,children:[(0,O.jsx)(F.Z,{control:(0,O.jsx)(L.Z,{id:"change-tariff-indexada-terms-check",name:"particular_contract_terms_accepted",onClick:function(){return T(!l)},checked:i.particular_contract_terms_accepted,color:"primary"}),label:(0,O.jsx)(p.Z,{variant:"body2",dangerouslySetInnerHTML:{__html:t(f?"PERIODS_ACCEPT_TERMS":"INDEXED_ACCEPT_TERMS")}})}),(0,O.jsx)(P.Z,{variant:"middle",className:n.dividerBottom})]}),!f&&I&&(0,O.jsx)(M.Z,{item:!0,xs:12,children:(0,O.jsx)(F.Z,{control:(0,O.jsx)(L.Z,{id:"change-tariff-indexada-legal-terms-check",name:"legal_terms_accepted",onClick:function(){return s(!d)},checked:i.indexed_legal_terms_accepted,color:"primary"}),label:(0,O.jsx)(p.Z,{variant:"body2",dangerouslySetInnerHTML:{__html:t("INDEXED_ACCEPT_LEGAL_TERMS",{inscription_conditions_url:t("TARIFF_INDEXADA_INSCRIPTION_CONDITIONS_URL")})}})})})]})]})},V=function(e){var n=e.setFieldValue,t=e.contractValues,a=e.values,i=e.targetTariff,r=e.isTariff20,c=e.isTariffIndexed,d=e.isIndexedPilotOngoing,o=(0,s.useState)(!1),_=(0,l.Z)(o,2),u=_[0],T=_[1],m=(0,s.useState)(!1),x=(0,l.Z)(m,2),E=x[0],f=x[1],I=(0,s.useState)(!1),h=(0,l.Z)(I,2),p=h[0],A=h[1];return(0,O.jsx)(z,{contractValues:t,values:a,isTariff20:r,isTariffIndexed:c,isIndexedPilotOngoing:d,open:u,targetTariff:i,indexadaTermsAccepted:E,handleIndexadaLegalTermsAccepted:function(e){A(e),n("indexed_legal_terms_accepted",e)},indexadaLegalTermsAccepted:p,handleClick:function(e){e.preventDefault(),T(!0)},handleAccept:function(){T(!1),n("terms_accepted",!0)},handleClose:function(){T(!1),n("terms_accepted",!1)},handleIndexadaTermsAccepted:function(e){f(e),n("particular_contract_terms_accepted",e)}})},W=t(272),Y=t(14),$=t(293),q=t(4884);function K(e,n,t){var a,i,r={NO_CHANGES:e("INDEXED_NO_CHANGES_ERROR_TXT"),OPEN_CASES:e("INDEXED_OPEN_CASES_ERROR_TXT"),STATE_CONFLICT:e("INDEXED_STATE_CONFLICT_ERROR_TXT"),PENDING_CONTRACT_MODIFICATION:e("PENDING_CONTRACT_MODIFICATION_ERROR_TXT"),CUSTOM_TARIFF:e("INDEXED_CUSTOM_TARIFF_ERROR_TXT"),INVALID_FIELD:e("INVALID_FIELD",{field_name:(null===t||void 0===t||null===(a=t[0])||void 0===a?void 0:a.field)||e("UNKNOWN_FIELD")}),UNAUTHORIZED:e("INDEXED_UNAUTHORIZED_ERROR_TXT"),UNEXPECTED_ERROR:e("INDEXED_UNEXPECTED_ERROR_TXT",{url:e("CONTACT_HELP_URL")})};return null!==(i=r[n])&&void 0!==i?i:r.UNEXPECTED_ERROR}var J=(0,T.Z)((function(e){return{container:{paddingTop:0,display:"flex",flexDirection:"column",alignItems:"center"},message:{marginTop:e.spacing(2),fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",textAlign:"center",color:"#6f6262","& a":{color:"#fe6444 !important"}},logo:{width:"220px",margin:e.spacing(2)},title:{textAlign:"center",fontSize:"1.15rem"},error:{width:e.spacing(6),height:e.spacing(6),color:"#fe6444",backgroundColor:"transparent",border:"2px solid #fe6444",marginBottom:e.spacing(3)}}}));var Q=function(e){var n=(0,u.UO)().language,t=(0,c.$)(),a=t.t,i=t.i18n,r=J(),l=e.error,d=void 0!==l&&l,o=e.showHeader,_=void 0===o||o;return(0,s.useEffect)((function(){i.changeLanguage(n)}),[n,i]),(0,O.jsxs)(O.Fragment,{children:[_&&(0,O.jsx)($.Z,{title:a("FAILURE_TITLE")}),(0,O.jsxs)("div",{className:r.container,children:[(0,O.jsx)(W.Z,{className:r.error,children:(0,O.jsx)(Y.Z,{fontSize:"large"})}),(0,O.jsx)(p.Z,{className:r.title,variant:"h6",children:a("FAILURE_TEXT")}),(0,O.jsx)(p.Z,{className:r.message,variant:"body1",dangerouslySetInnerHTML:{__html:K(a,d.code,d.data)}}),(0,O.jsx)(E.Z,{mt:3,mb:1,children:(0,O.jsx)("img",{className:r.logo,alt:"Cuca KO de Som Energia",src:q.Z})})]})]})},ee=t(8545),ne=t(9299),te=t(5936),ae=t(1462),ie=t(7788),re=t(5121),le=(0,T.Z)((function(e){return{title:{display:"flex",alignItems:"center"},menuTitle:{backgroundColor:"rgba(0, 0, 0, .06)",padding:"3%"}}})),se=(0,te.Z)({root:{boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(ae.Z),ce=(0,te.Z)({root:{backgroundColor:"rgba(0, 0, 0, .06)",marginBottom:2,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(ie.Z),de=(0,te.Z)((function(e){return{root:{padding:e.spacing(2)}}}))(re.Z);function oe(e){var n=e.title,t=e.sections,a=void 0===t?[]:t,i=le(),r=s.useState(""),c=(0,l.Z)(r,2),d=c[0],o=c[1];return(0,O.jsxs)("div",{children:[n?(0,O.jsx)(M.Z,{container:!0,item:!0,className:i.menuTitle,children:(0,O.jsx)(p.Z,{style:{fontSize:"16px"},variant:"subtitle1",children:n})}):null,a.map((function(e,n){return(0,O.jsxs)(se,{square:!0,expanded:d==="panel"+n,onChange:(t="panel"+n,function(e,n){o(!!n&&t)}),children:[(0,O.jsx)(ce,{"aria-controls":"panel1d-content",id:"panel1d-header",children:(0,O.jsxs)(M.Z,{container:!0,className:i.title,children:[(0,O.jsx)(M.Z,{item:!0,xs:1,children:(0,O.jsx)(p.Z,{variant:"body1",children:d==="panel"+n?"\u2212":"+"})}),(0,O.jsx)(M.Z,{item:!0,xs:11,children:(0,O.jsx)(p.Z,{variant:"body2",children:e.title})})]})}),(0,O.jsx)(de,{children:(0,O.jsx)(p.Z,{variant:"body2",dangerouslySetInnerHTML:{__html:e.text}})})]},e.title);var t}))]})}var _e=t(1422),ue=t(3460),Te=function(e){var n=e.title,t=e.desc,a=me();return(0,O.jsxs)("div",{className:a.root,children:[n?(0,O.jsx)(X.Z,{children:n}):null,t?(0,O.jsx)(ue.Z,{children:t}):null]})},me=(0,T.Z)((function(e){return{root:{position:"relative",color:e.palette.text.primary}}})),xe=t(1070),Ee=JSON.parse(document.getElementById("contract-data").textContent),fe={SAMPLE_DATA:"ctrl+shift+1",SHOW_INSPECTOR:"ctrl+shift+d"},Ie=function(e){var n=he(),t=(0,c.$)(),T=t.t,g=t.i18n,j=e.token,b=e.checkEnabled,L=void 0===b||b,P=e.isIndexedPilotOngoing,F=void 0!==P&&P,U=(0,u.UO)().language,X=(0,s.useState)(!1),y=(0,l.Z)(X,2),H=y[0],k=y[1],w=(0,s.useState)(0),B=(0,l.Z)(w,2),G=B[0],z=B[1],W=(0,s.useState)(!1),Y=(0,l.Z)(W,2),$=Y[0],q=Y[1],J=(0,s.useState)(!1),te=(0,l.Z)(J,2),ae=te[0],ie=te[1],re=(0,s.useState)(!1),le=(0,l.Z)(re,2),se=le[0],ce=le[1],de=(0,s.useState)(!1),ue=(0,l.Z)(de,2),me=ue[0],Ie=ue[1],pe=(0,s.useState)(!1),Ae=(0,l.Z)(pe,2),Ne=Ae[0],ge=Ae[1],Re=(0,s.useState)(L),ve=(0,l.Z)(Re,2),Se=ve[0],De=ve[1],Ce=(0,s.useState)((0,xe.dm)(Ee.tariff)),je=(0,l.Z)(Ce,1)[0],Oe=(0,s.useState)((0,xe.vO)(Ee.tariff)),Ze=(0,l.Z)(Oe,1)[0],be=(0,s.useState)((0,xe.fQ)(Ee.tariff)),Le=(0,l.Z)(be,1)[0],Pe=(0,s.useState)(""),Fe=(0,l.Z)(Pe,2),Me=Fe[0],Ue=Fe[1],Xe={SHOW_INSPECTOR:function(){k(!H)}},ye=(0,s.useMemo)((function(){var e=[{title:T("GENERAL_CONDITIONS"),text:T("GENERAL_CONDITIONS_TEXT")}];return Le||e.push({title:T("INDEXED_SPECIFIC_CONDITIONS"),text:T("INDEXED_SPECIFIC_CONDITIONS_TEXT")},{title:T("INDEXED_MARGE"),text:T("INDEXED_MARGE_TEXT",{kCoefficient:Me})}),e.push({title:T("DURADA"),text:T("DURADA_TEXT",{tariff:Ne})},{title:T("DESESTIMENT"),text:T("DESESTIMENT_TEXT")},{title:T("PERSONAL_DATA_PROTECTION"),text:T("PERSONAL_DATA_PROTECTION_TEXT")}),e}),[Le,T,Me,Ne]),He=function(e){return{"2.0TD_SOM":T("TAR_20TD_SOM"),"2.0TD_SOM_INSULAR":T("TAR_20TD_SOM_INSULAR"),"3.0TD_SOM":T("TAR_30TD_SOM"),"3.0TD_SOM_INSULAR":T("TAR_30TD_SOM_INSULAR"),"6.0TD_SOM":T("TAR_60TD_SOM"),"6.0TD_SOM_INSULAR":T("TAR_60TD_SOM_INSULAR"),"Indexada 2.0TD Pen\xednsula":T("TAR_INDEXADA_20TD_PENINSULA"),"Indexada 2.0TD Can\xe0ries":T("TAR_INDEXADA_20TD_CANARIES"),"Indexada 2.0TD Balears":T("TAR_INDEXADA_20TD_BALEARS"),"Indexada 3.0TD Pen\xednsula":T("TAR_INDEXADA_30TD_PENINSULA"),"Indexada 3.0TD Can\xe0ries":T("TAR_INDEXADA_30TD_CANARIES"),"Indexada 3.0TD Balears":T("TAR_INDEXADA_30TD_BALEARS"),"Indexada 6.1TD Peninsula":T("TAR_INDEXADA_61TD_PENINSULA"),"Indexada 6.1TD Can\xe0ries":T("TAR_INDEXADA_61TD_CANARIES"),"Indexada 6.1TD Balears":T("TAR_INDEXADA_61TD_BALEARS"),"Indexada Empresa Pen\xednsula":T("TAR_INDEXADA_EMPRESA_PENINSULA"),"Indexada Empresa Can\xe0ries":T("TAR_INDEXADA_EMPRESA_CANARIES"),"Indexada Empresa Balears":T("TAR_INDEXADA_EMPRESA_BALEARS")}[e]||e},ke=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,a,r,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,De(!0),e.next=4,(0,ne.YN)(j);case 4:a=e.sent,De(!1),r=He(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.target_tariff),ge(r),Ue(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.k_coefficient_eurkwh),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),De(!1),ce(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.error);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){L&&ke()}),[]),(0,s.useEffect)((function(){U&&g.changeLanguage(U),U?R().locale(U):R().locale("es")}),[U,g]);var we=[_.Ry().shape({}),_.Ry().shape({}),_.Ry().shape({terms_accepted:_.Xg().required(T("UNACCEPTED_TERMS")).oneOf([!0],T("UNACCEPTED_TERMS")),particular_contract_terms_accepted:_.Xg().required(T("UNACCEPTED_TERMS")).oneOf([!0],T("UNACCEPTED_TERMS")),indexed_legal_terms_accepted:_.Xg().when([],{is:function(){return!Le},then:_.Xg().required(T("UNACCEPTED_TERMS"))&&_.Xg().oneOf([!0],T("UNACCEPTED_TERMS")),otherwise:_.Xg().notRequired()})})];if(!Ee.name||!Ee.cups)return(0,O.jsx)(m.Z,{severity:"error",children:(0,O.jsx)(p.Z,{className:n.disclaimer,variant:"body1",dangerouslySetInnerHTML:{__html:T("TARIFF_CHANGE_NOT_AVAILABLE")}})});if(Se)return(0,O.jsx)(_e.Z,{});if(L&&!Ne&&(0!=G||!["OPEN_CASES","STATE_CONFLICT","PENDING_CONTRACT_MODIFICATION","CUSTOM_TARIFF"].includes(null===se||void 0===se?void 0:se.code)))return(0,O.jsx)(d.GlobalHotKeys,{handlers:Xe,keyMap:fe,children:(0,O.jsx)(Q,{error:se,showHeader:!1})});var Be={url_general_conditions:T("GENERAL_CONDITIONS_URL"),url_specific_conditions:T("INDEXED_SPECIFIC_CONDITIONS_URL"),url_indexada_help:T("TARIFF_INDEXED_HELP_URL"),url_tariff_index_characteristics:T(je?"TARIFF_CHARACTERISTICS_INDEX_20_URL":Ze?"TARIFF_CHARACTERISTICS_INDEX_30_URL":"TARIFF_CHARACTERISTICS_INDEX_6_URL"),url_tariff_characteristics:T(je?"TARIFF_CHARACTERISTICS_20_URL":Ze?"TARIFF_CHARACTERISTICS_30_URL":"TARIFF_CHARACTERISTICS_6_URL"),url_tariff_web:T(je?"TARIFF_WEB_URL":Ze?"TARIFF_WEB_30_URL":"TARIFF_WEB_6_URL")},Ge=(0,O.jsx)("div",{dangerouslySetInnerHTML:{__html:T(Le?je?"PERIODS_IMPORTANT_INFO_BODY":Ze?"PERIODS_IMPORTANT_INFO_BODY_30":"PERIODS_IMPORTANT_INFO_BODY_6":je?"INDEXED_IMPORTANT_INFO_BODY":"INDEXED_IMPORTANT_INFO_BODY_30",Be)}}),ze=se?(0,O.jsxs)(m.Z,{severity:"error",children:[" ",K(T,null===se||void 0===se?void 0:se.code,null===se||void 0===se?void 0:se.data)," "]}):(0,O.jsx)("div",{dangerouslySetInnerHTML:{__html:T(Le?"PERIODS_INTRO_BODY":"INDEXED_INTRO_BODY",Be)}}),Ve=He(Ee.tariff);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(d.GlobalHotKeys,{handlers:Xe,keyMap:fe,children:(0,O.jsx)(A.M,{utils:N.Z,children:(0,O.jsxs)(M.Z,{container:!0,justifyContent:"space-between",children:[(0,O.jsx)(M.Z,{item:!0,xs:8,children:(0,O.jsx)(o.J9,{onSubmit:function(){},enableReinitialize:!0,initialValues:{terms_accepted:!1,particular_contract_terms_accepted:!1},validationSchema:we[G],validateOnMount:!0,children:function(e){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(o.l0,{id:"cancelForm",method:"POST",className:n.root,noValidate:!0,autoComplete:"off",children:(0,O.jsxs)(I.Z,{maxWidth:"lg",disableGutters:!0,children:[!ae&&(0,O.jsxs)(O.Fragment,{children:[2!==G?(0,O.jsx)(Z,(0,a.Z)((0,a.Z)({},e.values),{},{contract:Ee.name,currentTariff:Ve,targetTariff:Ne,isTariff20:je,isTariffIndexed:Le})):null,0===G?(0,O.jsx)(Te,(0,a.Z)({isTariff20:je,isTariff30:Ze,isTariffIndexed:Le,desc:ze},e)):null,1===G?(0,O.jsx)(Te,(0,a.Z)({isTariff20:je,isTariff30:Ze,isTariffIndexed:Le,title:T("INDEXED_INTRO_TITLE"),desc:Ge},e)):null,2===G?(0,O.jsx)(V,(0,a.Z)({isTariff20:je,isTariffIndexed:Le,isIndexedPilotOngoing:F,targetTariff:Ne,contractValues:Ee},e)):null,(0,O.jsx)(E.Z,{mx:0,mt:2,mb:3,children:(0,O.jsxs)("div",{className:n.actionsContainer,children:[void 0===(null===me||void 0===me?void 0:me.contract_number)&&(0,O.jsx)(x.Z,{"data-cy":"prev",className:n.button,startIcon:(0,O.jsx)(D.Z,{}),disabled:0===G||$,onClick:function(){return function(e){var n=G-1;z(Math.max(0,n)),ae&&(ie(!1),ce(!1)),e.submitForm().then((function(){e.validateForm(),e.setTouched({})}))}(e)},children:T("PAS_ANTERIOR")}),G<2?(0,O.jsx)(x.Z,{type:"button","data-cy":"next",id:"change-tariff-next-step-button",className:n.button,variant:"contained",color:"primary",endIcon:(0,O.jsx)(S.Z,{}),disabled:!e.isValid||!Ne,onClick:function(){return function(e){var n=G+1;e.submitForm().then((function(){e.isValid&&(z(Math.min(n,3)),e.validateForm(),e.setTouched({}))}))}(e)},children:T("SEGUENT_PAS")}):!ae&&(0,O.jsx)(x.Z,{type:"button","data-cy":"submit",id:"tariff-change-submit",className:n.button,variant:"contained",color:"primary",startIcon:$?(0,O.jsx)(f.Z,{size:24}):(0,O.jsx)(C.Z,{}),disabled:$||!e.isValid,onClick:function(){return function(e){var n={token:j,general_contract_terms_accepted:e.terms_accepted,particular_contract_terms_accepted:e.particular_contract_terms_accepted};Le||(n.indexed_specific_terms_accepted=e.terms_accepted,F&&(n.indexed_pilot_legal_terms_accepted=e.indexed_legal_terms_accepted)),q(!0),(0,ne.Wr)(n).then((function(e){q(!1),ie(!0),Ie(e)})).catch((function(e){var n,t,a,i;q(!1),ie(!0);var r=null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.error?null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error:{code:"UNEXPECTED_ERROR"};ce(r)}))}(e.values)},children:T("INDEXED_SUBMIT_BUTTON_TEXT")})]})})]}),ae&&(0,O.jsx)(h.Z,{elevation:0,className:n.stepContainer,children:me?(0,O.jsx)(ee.default,{showHeader:!1,title:T(Le?"PERIODS_SUCCESS_PAGE_TITLE":"INDEXED_SUCCESS_PAGE_TITLE"),subtitle:Ne,description:T(Le?"PERIODS_SUCCESS_PAGE_DESC":"INDEXED_SUCCESS_PAGE_DESC")}):(0,O.jsx)(Q,{error:se,showHeader:!1})})]})}),H&&(0,O.jsx)(v.Z,(0,a.Z)({},e))]})}})}),(0,O.jsx)(M.Z,{item:!0,xs:3,children:(0,O.jsx)(oe,{title:T("INDEXED_CONTRACT_CHARACTERISTICS"),sections:ye})})]})})})})},he=(0,T.Z)((function(e){return{root:{backgroundColor:"#f2f2f2",color:e.palette.text.primary,display:"flex",paddingBottom:"2rem"},stepContainer:{padding:"4rem",marginTop:0,marginBottom:e.spacing(4),width:"100%",display:"flex",flexDirection:"column",backgroundColor:e.palette.backgroundColor},step:{position:"absolute",width:"100%"},actionsContainer:{display:"flex",justifyContent:"space-between",paddingTop:"0.25rem"},disclaimer:{fontSize:"14px",fontWeight:400}}}))}}]);
//# sourceMappingURL=503.e9cc2ee1.chunk.js.map