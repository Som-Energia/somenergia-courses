"use strict";(self.webpackChunkwebforms_ui=self.webpackChunkwebforms_ui||[]).push([[162],{6697:function(e,n,i){i(2791);var l=i(9526),t=i(184);n.Z=function(e){return(0,t.jsx)(l.Z,{elevation:3,style:{margin:"1rem 0"},children:(0,t.jsxs)("pre",{style:{background:"#fff",fontSize:"1rem",padding:"1.5rem"},children:[(0,t.jsx)("strong",{children:"props"})," ="," ",JSON.stringify(e,null,2)]})})}},7084:function(e,n,i){var l=i(4165),t=i(5861),a=i(9439),o=i(2791),r=i(7689),d=i(3168),m=i(8596),u=i(5720),s=i(1288),v=i(4279),c=i(9626),b=i(9650),h=i(9299),_=i(184),p=(0,m.Z)((function(e){return{memberChecked:{fontWeight:500,color:e.palette.primary.main}}}));n.Z=function(e){var n,i,m,x,N,E,f,T,O,I,Z=(0,d.$)().t,g=p(),R=new URLSearchParams((0,r.TH)().search),j=e.values,M=e.handleBlur,C=e.handleChange,y=e.errors,A=e.touched,S=e.setFieldValue,B=(0,o.useState)(!1),L=(0,a.Z)(B,2),P=L[0],U=L[1],F=(0,o.useState)(!1),H=(0,a.Z)(F,2),D=H[0],w=H[1],k=(0,o.useState)(!1),z=(0,a.Z)(k,2),q=z[0],V=z[1];return(0,o.useEffect)((function(){var e,n,i=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,(0,h.Uu)(j.member.vat);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w(e.t0);case 9:return e.prev=9,e.next=12,(0,h.GB)(j.member.number,j.member.vat);case 12:n=e.sent,console.log(n),!0===(null===n||void 0===n?void 0:n.state)?(w(!1),S("member.checked",!0)):(w(!0),S("member.checked",!1)),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(9),w(e.t1);case 20:U(!1);case 21:case"end":return e.stop()}}),e,null,[[1,6],[9,17]])})));return function(){return e.apply(this,arguments)}}();null!==j&&void 0!==j&&null!==(e=j.member)&&void 0!==e&&e.number&&null!==j&&void 0!==j&&null!==(n=j.member)&&void 0!==n&&n.vat&&j.member.vat.length>=9?i():S("member.checked",!1)}),[j.member.number,j.member.vat,S]),(0,o.useEffect)((function(){var e=R.get("h");try{(e=e&&atob(e).split(";"))&&e.length>1&&(S("member.number",e[0],!1),S("member.vat",e[1]),V(!0))}catch(D){console.error("Invalid hash code")}}),[R.get("h"),j,S]),(0,_.jsxs)(s.Z,{container:!0,spacing:3,children:[(0,_.jsx)(s.Z,{item:!0,xs:12,sm:6,children:(0,_.jsx)(c.Z,{required:!0,id:"memberNumber",name:"member.number",label:Z("NUMERO_SOCI"),onChange:C,onBlur:M,value:j.member.number,fullWidth:!0,disabled:q,variant:"outlined",margin:"normal",InputProps:{endAdornment:(0,_.jsxs)(v.Z,{position:"end",children:[P&&(0,_.jsx)(u.Z,{size:24}),!P&&(null===j||void 0===j||null===(n=j.member)||void 0===n?void 0:n.checked)&&(0,_.jsx)(b.Z,{color:"primary"})]})},error:!1!==D||(null===y||void 0===y||null===(i=y.member)||void 0===i?void 0:i.number)&&(null===A||void 0===A||null===(m=A.member)||void 0===m?void 0:m.number),helperText:(null===A||void 0===A||null===(x=A.member)||void 0===x?void 0:x.number)&&(null===y||void 0===y||null===(N=y.member)||void 0===N?void 0:N.number)||(null!==j&&void 0!==j&&null!==(E=j.member)&&void 0!==E&&E.checked?(0,_.jsx)("span",{className:g.memberChecked,children:Z("SOCIA_TROBADA")}):D?(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:Z("SOCIA_NO_TROBADA")}}):(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:Z("HELP_POPOVER_SOCIA")}}))})}),(0,_.jsx)(s.Z,{item:!0,xs:12,sm:6,children:(0,_.jsx)(c.Z,{required:!0,id:"vat",name:"member.vat",label:Z("VAT"),onChange:function(e){var n=e.target.value.match(/[0-9A-Za-z]{0,12}/);n=n[0].toUpperCase(),S("member.vat",n)},onBlur:M,value:j.member.vat,fullWidth:!0,disabled:q,variant:"outlined",margin:"normal",error:(null===y||void 0===y||null===(f=y.member)||void 0===f?void 0:f.vat)&&(null===A||void 0===A||null===(T=A.member)||void 0===T?void 0:T.vat),helperText:(null===A||void 0===A||null===(O=A.member)||void 0===O?void 0:O.vat)&&(null===y||void 0===y||null===(I=y.member)||void 0===I?void 0:I.vat)||Z("HELP_POPOVER_NIF")})})]})}},8176:function(e,n,i){i.r(n),i.d(n,{default:function(){return $}});var l=i(1413),t=i(4165),a=i(5861),o=i(9439),r=i(2791),d=i(3168),m=i(7325),u=i(5173),s=i(2797),v=i(7689),c=i(8596),b=i(6513),h=i(4265),_=i(5720),p=i(3712),x=i(9526),N=i(6697),E=i(9329),f=i(6716),T=i(2439),O=i(2130),I=i(8302),Z=i(293),g=i(8952),R=i(7084),j=i(7369),M=i(184),C=(0,c.Z)((function(e){return{title:{fontSize:"1rem",marginTop:"16px",fontWeight:500},titleWithMargin:{marginBottom:e.spacing(1)},titleWithMarginPlus:{marginBottom:e.spacing(3)}}})),y=function(e){var n,i,t,a,o,r,m,u,s,v,c,b,_,p,x,N=(0,d.$)().t,E=C(),f=e.values,T=e.handleBlur,y=e.errors,A=e.touched,S=e.setFieldValue,B=e.setFieldTouched,L=e.resetForm,P=e.title,U=void 0===P?N("CONTRIBUTION"):P;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z.Z,{title:U}),(0,M.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:N("CONTRIBUTION_MEMBER_IDENTIFIER_DESC")}}),(0,M.jsx)(h.Z,{pt:0,mb:1,children:(0,M.jsx)(g.Z,{question:N("CONTRIBUTION_MEMBER_QUESTION"),onChange:function(e){L(),S("member.is_member",!(null===e||void 0===e||!e.option))},condensed:!0,value:null===f||void 0===f||null===(n=f.member)||void 0===n?void 0:n.is_member,canBeEmpty:!1,options:[{value:!0,label:N("CONTRIBUTION_MEMBER_YES"),id:"member_choose_yes"},{value:!1,label:N("CONTRIBUTION_MEMBER_NO"),id:"member_choose_no"}]})}),null!==f&&void 0!==f&&null!==(i=f.member)&&void 0!==i&&i.is_member?(0,M.jsxs)(h.Z,{id:"box_member_identifier",mt:0,mb:2,children:[(0,M.jsx)(I.Z,{variant:"h6",className:"".concat(E.title," ").concat(E.titleWithMargin),dangerouslySetInnerHTML:{__html:N("CONTRIBUTION_MEMBER_INDENTIFIER")}}),(0,M.jsx)(R.Z,(0,l.Z)({},e))]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(h.Z,{id:"box_no_member_identifier",mt:0,mb:2,children:[(0,M.jsx)(I.Z,{variant:"h6",className:"".concat(E.title," ").concat(E.titleWithMarginPlus),dangerouslySetInnerHTML:{__html:N("CONTRIBUTION_MEMBER_VAT")}}),(0,M.jsx)(h.Z,{id:"box_no_member_vat_input",mt:2,mb:1,children:(0,M.jsx)(j.Z,{id:"vat",name:"member.vat",label:N("VAT_LABEL"),variant:"outlined",fullWidth:!0,required:!0,value:null===f||void 0===f||null===(t=f.member)||void 0===t?void 0:t.vat,onChange:function(e){var n=e.vat,i=e.isPhisical,l=e.valid;S("member.isphisical",i,!1),S("member.vatvalid",l,!1),S("member.exists",!1,!1),S("member.vat",n),""!==n&&B("member.vat",!0)},onBlur:T,error:(null===y||void 0===y||null===(a=y.member)||void 0===a?void 0:a.vat)&&(null===A||void 0===A||null===(o=A.member)||void 0===o?void 0:o.vat)||(null===A||void 0===A||null===(r=A.member)||void 0===r?void 0:r.vat)&&!1===(null===f||void 0===f||null===(m=f.member)||void 0===m?void 0:m.vatvalid)||(null===A||void 0===A||null===(u=A.member)||void 0===u?void 0:u.vat)&&!0===(null===f||void 0===f||null===(s=f.member)||void 0===s?void 0:s.exists),helperText:(null===A||void 0===A||null===(v=A.member)||void 0===v?void 0:v.vat)&&(null===y||void 0===y||null===(c=y.member)||void 0===c?void 0:c.vat)||(null===A||void 0===A||null===(b=A.member)||void 0===b?void 0:b.vat)&&(null===y||void 0===y||null===(_=y.member)||void 0===_?void 0:_.vatvalid)||(null===A||void 0===A||null===(p=A.member)||void 0===p?void 0:p.vat)&&(null===y||void 0===y||null===(x=y.member)||void 0===x?void 0:x.exists)})})]}),(0,M.jsx)(h.Z,{mt:0,mb:2,children:(0,M.jsx)(O.Z,{severity:"warning",children:(0,M.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:N("CONTRIBUTION_MEMBER_WARNING")}})})})]})]})},A=i(9885),S=i(5247),B=i(4135),L=i(4279),P=i(9626),U=i(5521),F=i(1070),H=(0,c.Z)((function(e){return{title:{fontSize:"1rem",marginTop:e.spacing(2),paddingBottom:e.spacing(1)},titleWithMargin:{marginBottom:e.spacing(2)},icon:{"& path":{color:"rgba(0, 0, 0, 0.54)"}}}})),D=function(e){var n,i,l,t,a,o,r,m,u,s,v,c,b,_=e.values,p=e.handleChange,x=e.handleBlur,N=e.errors,E=e.touched,f=e.setFieldValue,T=(0,d.$)().t,O=H();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z.Z,{title:T("CONTRIBUTION")}),(0,M.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:T("WELCOME",{name:null!==_&&void 0!==_&&_.member.is_member?_.member.full_name:"".concat(_.member.name," ").concat(_.member.surname1)})}}),(0,M.jsx)(h.Z,{pt:1,children:(0,M.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:T("CONTRIBUTION_REMEMBER",{min:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.minContribution),max:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.maxContribution),step:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.contributionStep)})}})}),(0,M.jsxs)(h.Z,{pt:1,children:[(0,M.jsx)(I.Z,{variant:"h6",className:O.title,dangerouslySetInnerHTML:{__html:T("CONTRIBUTION_AMOUNT_TITLE",{name:_.member.full_name})}}),(0,M.jsx)(P.Z,{required:!0,id:"amount",name:"payment.amount",variant:"outlined",className:O.icon,fullWidth:!0,label:T("CONTRIBUTION_AMOUNT"),value:null===_||void 0===_||null===(n=_.payment)||void 0===n?void 0:n.amount,margin:"normal",onChange:p,onBlur:x,error:(null===N||void 0===N||null===(i=N.payment)||void 0===i?void 0:i.amount)&&(null===E||void 0===E||null===(l=E.payment)||void 0===l?void 0:l.amount),helperText:(null===E||void 0===E||null===(t=E.payment)||void 0===t?void 0:t.amount)&&(null===N||void 0===N||null===(a=N.payment)||void 0===a?void 0:a.amount)||T("CONTRIBUTION_AMOUNT_HELPER"),InputProps:{startAdornment:(0,M.jsx)(L.Z,{position:"start",children:(0,M.jsx)(U.Z,{})})}})]}),(0,M.jsxs)(h.Z,{pt:1,mb:0,children:[(0,M.jsx)(I.Z,{variant:"h6",className:"".concat(O.title," ").concat(O.titleWithMargin),dangerouslySetInnerHTML:{__html:T("CONTRIBUTION_IBAN_TITLE",{name:_.member.full_name})}}),(0,M.jsx)(A.Z,{id:"iban",name:"payment.iban",label:T("IBAN_LABEL"),onChange:function(e){var n=e.IBAN,i=e.IBANValid;f("payment.iban",n,!1),f("payment.iban_valid",i)},onBlur:x,value:null===_||void 0===_||null===(o=_.payment)||void 0===o?void 0:o.iban,error:((null===N||void 0===N||null===(r=N.payment)||void 0===r?void 0:r.iban)||(null===N||void 0===N||null===(m=N.payment)||void 0===m?void 0:m.iban_valid))&&(null===E||void 0===E||null===(u=E.payment)||void 0===u?void 0:u.iban),helperText:(null===E||void 0===E||null===(s=E.payment)||void 0===s?void 0:s.iban)&&((null===N||void 0===N||null===(v=N.payment)||void 0===v?void 0:v.iban)||(null===N||void 0===N||null===(c=N.payment)||void 0===c?void 0:c.iban_valid))||T("IBAN_HELP"),variant:"outlined"})]}),(0,M.jsx)(h.Z,{mt:2,mb:1,children:(0,M.jsx)(B.Z,{control:(0,M.jsx)(S.Z,{checked:null===_||void 0===_||null===(b=_.payment)||void 0===b?void 0:b.sepa_accepted,onClick:function(e){var n;e.preventDefault(),f("payment.sepa_accepted",!(null!==_&&void 0!==_&&null!==(n=_.payment)&&void 0!==n&&n.sepa_accepted))},color:"primary",value:!0}),label:T("IBAN_ACCEPT_DIRECT_DEBIT")})})]})},w=i(4307),k=i(7447),z=i(1288),q=(0,c.Z)((function(e){return{withoutLabel:{marginTop:e.spacing(1)},sectionTitle:{fontSize:"18px",fontWeight:500,textTransform:"uppercase",marginTop:e.spacing(3),marginBottom:e.spacing(1.2)},field:{display:"flex",alignItems:"center",marginBottom:e.spacing(.8)},label:{textTransform:"uppercase",paddingRight:"12px",fontSize:"14px",fontWeight:400,color:"rgba(0, 0, 0, 0.54)"},value:{fontSize:"16px"},divider:{marginTop:"12px",marginLeft:0,marginRight:"32px"},dividerBottom:{marginTop:"24px",marginLeft:0,marginRight:"32px"}}})),V=function(e){var n,i,l,t,a,o,r,m,u,s,v,c,b,_,p,x,N,E,f,T,O,g,R,j,C,y,A=q(),L=(0,d.$)().t,P=e.values,U=e.setFieldValue,H=function(e){var n=e.label,i=e.value;return(0,M.jsxs)("div",{className:A.field,children:[(0,M.jsx)("div",{className:"field__title",children:(0,M.jsx)(I.Z,{className:A.label,variant:"subtitle2",children:n})}),(0,M.jsx)("div",{className:"field__value",children:(0,M.jsx)(I.Z,{className:A.value,variant:"body2",children:i})})]})};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z.Z,{title:L("CONTRIBUTION")}),(0,M.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:L("REVIEW_DESCRIPTION")}}),(0,M.jsxs)(z.Z,{container:!0,children:[(0,M.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,M.jsx)(I.Z,{className:A.sectionTitle,variant:"h6",children:L(null!==P&&void 0!==P&&null!==(n=P.member)&&void 0!==n&&n.is_member?"REVIEW_PERSONAL_DATA":"NEW_MEMBER")}),(0,M.jsx)(H,{label:"NIF",value:null===P||void 0===P||null===(i=P.member)||void 0===i?void 0:i.vat}),(null===P||void 0===P||null===(l=P.member)||void 0===l?void 0:l.is_member)&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(H,{label:L("NUMERO_SOCI"),value:"".concat(null===P||void 0===P||null===(t=P.member)||void 0===t?void 0:t.number)})}),!(null!==P&&void 0!==P&&null!==(a=P.member)&&void 0!==a&&a.is_member)&&(0,M.jsxs)(M.Fragment,{children:[null!==P&&void 0!==P&&null!==(o=P.member)&&void 0!==o&&o.isphisical?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(H,{label:L("NAME"),value:"".concat(null===P||void 0===P||null===(r=P.member)||void 0===r?void 0:r.name," ").concat(null===P||void 0===P||null===(m=P.member)||void 0===m?void 0:m.surname1," ").concat(null===P||void 0===P||null===(u=P.member)||void 0===u?void 0:u.surname2)})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(H,{label:L("LEGAL_NAME"),value:null===P||void 0===P||null===(s=P.member)||void 0===s?void 0:s.name}),(0,M.jsx)(H,{label:L("PROXY"),value:"".concat(null===P||void 0===P?void 0:P.member.proxyname," (").concat(null===P||void 0===P||null===(v=P.member)||void 0===v?void 0:v.proxynif,")")})]}),(0,M.jsx)(H,{label:L("ADDRESS"),value:"".concat(null===P||void 0===P||null===(c=P.member)||void 0===c?void 0:c.address,", ").concat(null===P||void 0===P||null===(b=P.member)||void 0===b?void 0:b.number," ").concat((null===P||void 0===P||null===(_=P.member)||void 0===_?void 0:_.floor)||""," ").concat((null===P||void 0===P||null===(p=P.member)||void 0===p?void 0:p.door)||"")}),(0,M.jsx)(H,{label:L("CITY"),value:"".concat(null===P||void 0===P||null===(x=P.member)||void 0===x?void 0:x.city.name," (").concat(null===P||void 0===P||null===(N=P.member)||void 0===N?void 0:N.postal_code,") ").concat(null===P||void 0===P||null===(E=P.member)||void 0===E?void 0:E.state.name)})]})]}),(0,M.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,M.jsx)(I.Z,{className:A.sectionTitle,variant:"h6",children:L("CONTACT")}),null!==P&&void 0!==P&&null!==(f=P.member)&&void 0!==f&&f.is_member?(0,M.jsx)("div",{dangerouslySetInnerHTML:{__html:L("DATA_AS_IN_OV")}}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(H,{label:L("PHONE"),value:null===P||void 0===P||null===(T=P.member)||void 0===T?void 0:T.phone1}),(0,M.jsx)(H,{label:L("EMAIL"),value:null===P||void 0===P||null===(O=P.member)||void 0===O?void 0:O.email}),(0,M.jsx)(H,{label:L("LANGUAGE"),value:F.Mj[null===P||void 0===P||null===(g=P.member)||void 0===g?void 0:g.language]})]})]}),(0,M.jsxs)(z.Z,{item:!0,xs:12,sm:12,children:[(0,M.jsx)(k.Z,{variant:"middle",className:A.divider}),(0,M.jsx)(I.Z,{className:A.sectionTitle,variant:"h6",children:L("SUMMARY_GROUP_PAYMENT")}),(0,M.jsx)(H,{label:L("CONTRIBUTION_AMOUNT"),value:"".concat(new Intl.NumberFormat("ca").format(null===P||void 0===P||null===(R=P.payment)||void 0===R?void 0:R.amount)," \u20ac")}),!(null!==P&&void 0!==P&&null!==(j=P.member)&&void 0!==j&&j.is_member)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(H,{label:L("CONTRIBUTION_NEW_MEMBER_CONTRIB"),value:"".concat(new Intl.NumberFormat("ca").format(F.jT)," \u20ac")}),(0,M.jsx)(H,{label:L("CONTRIBUTION_TOTAL_AMOUNT"),value:"".concat(new Intl.NumberFormat("ca").format(parseInt(F.jT)+parseInt(null===P||void 0===P||null===(C=P.payment)||void 0===C?void 0:C.amount))," \u20ac")})]}),(0,M.jsx)(H,{label:L("IBAN"),value:null===P||void 0===P||null===(y=P.payment)||void 0===y?void 0:y.iban}),(0,M.jsx)(k.Z,{variant:"middle",className:A.dividerBottom})]})]}),(0,M.jsx)(h.Z,{mt:2,mb:1,children:(0,M.jsx)(B.Z,{control:(0,M.jsx)(S.Z,{checked:null===P||void 0===P?void 0:P.terms_accepted,onClick:function(e){e.preventDefault(),U("terms_accepted",!(null!==P&&void 0!==P&&P.terms_accepted))},color:"primary",value:!0}),label:(0,M.jsx)("label",{dangerouslySetInnerHTML:{__html:L("CONTRIBUTION_GENERAL_TERMS",{url:L("CONTRIBUTION_GENERAL_TERMS_URL")})}})})})]})},W=i(7188),X=i(8545),G=i(9299),Y={SAMPLE_DATA:"ctrl+shift+1",SHOW_INSPECTOR:"ctrl+shift+d"},$=function(e){var n=J(),i=(0,d.$)(),c=i.t,O=i.i18n,I=(0,v.UO)().language,Z=(0,r.useState)(!1),g=(0,o.Z)(Z,2),R=g[0],j=g[1],C=(0,r.useState)(0),A=(0,o.Z)(C,2),S=A[0],B=A[1],L=(0,r.useState)(!1),P=(0,o.Z)(L,2),U=P[0],H=P[1],k=(0,r.useState)(!1),z=(0,o.Z)(k,2),q=z[0],$=z[1],K=(0,r.useState)(!1),Q=(0,o.Z)(K,2),ee=Q[0],ne=Q[1],ie=(0,r.useState)({}),le=(0,o.Z)(ie,2),te=le[0],ae=le[1];(0,r.useEffect)((function(){O.changeLanguage(I)}),[I,O]);var oe={SHOW_INSPECTOR:function(){j(!R)}},re={member:{is_member:!0,number:"",vat:"",checked:!1,full_name:"",proxynif:"",proxyname:"",name:"",address:"",postal_code:"",state:{id:""},city:{id:""},surname1:"",surname2:"",email:"",email2:"",phone1:"",phone2:"",language:"".concat(O.language,"_ES")},payment:{amount:"",iban:"",payment_method:"iban",sepa_accepted:!1},terms_accepted:!1,privacy_policy_accepted:!1,legal_person_accepted:!1},de=[s.Ry().shape({is_member:s.Xg().oneOf([!0,!1],c("NO_IS_MEMBER")),member:s.Ry().shape({number:s.Z_().when("is_member",{is:!0,then:s.Z_().required(c("NO_MEMBER_NUMBER"))}),vat:s.Z_().required(c("NO_MEMBER_VAT")).when("is_member",{is:!1,then:s.Z_().matches(/(^[A-GI-Z0-9])/,c("CIF_COMMUNITY_OWNERS"))}),vatvalid:s.Xg().when("is_member",{is:!1,then:s.Xg().required(c("FILL_NIF")).oneOf([!0],c("FILL_NIF"))}),checked:s.Xg().when("is_member",{is:!0,then:s.Xg().required(c("NO_MEMBER_MATCH")).oneOf([!0],c("NO_MEMBER_MATCH"))}),exists:s.Xg().when("is_member",{is:!1,then:s.Xg().required(c("DNI_EXIST")).oneOf([!1],c("DNI_EXIST"))})})}),s.Ry().shape({member:s.Ry().shape({name:s.Z_().required(c("NO_NAME")),surname1:s.Z_().when("isphisical",{is:!0,then:s.Z_().required(c("NO_SURNAME1"))}),proxyname:s.Z_().when("isphisical",{is:!1,then:s.Z_().required(c("NO_PROXY_NAME"))}),proxynif:s.Z_().when("isphisical",{is:!1,then:s.Z_().required(c("NO_PROXY_NIF"))}),proxynif_valid:s.Xg().when("isphisical",{is:!1,then:s.Xg().required(c("FILL_NIF")).oneOf([!0],c("FILL_NIF"))}),address:s.Z_().required(c("NO_ADDRESS")),postal_code:s.Z_().matches(/^\d*$/,c("NO_POSTALCODE")).required(c("NO_POSTALCODE")).min(5,c("NO_POSTALCODE")).max(5,c("NO_POSTALCODE")),state:s.Ry().shape({id:s.Rx().required(c("NO_STATE"))}),city:s.Ry().shape({id:s.Rx().required(c("NO_CITY"))}),email:s.Z_().required(c("NO_EMAIL")).email(c("NO_EMAIL")),email2:s.Z_().test("repeatEmail",c("NO_REPEATED_EMAIL"),(function(){return this.parent.email===this.parent.email2})),phone1:s.Z_().min(9,c("NO_PHONE")).required(c("NO_PHONE")),phone2:s.Z_().min(9,c("NO_PHONE")),language:s.Z_().required(c("NO_LANGUAGE"))}),legal_person_accepted:s.Xg().test({name:"isTheMemberVat",message:c("ACCEPT_LEGAL_PERSON"),test:function(){return!(!1===this.parent.member.isphisical&&!0!==this.parent.legal_person_accepted)}}),privacy_policy_accepted:s.Xg().required(c("UNACCEPTED_PRIVACY_POLICY")).oneOf([!0],c("UNACCEPTED_PRIVACY_POLICY"))}),s.Ry().shape({payment:s.Ry().shape({amount:s.Rx().required(c("AMOUNT_HELPER_MIN",{amount:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.minContribution)})).min(null===F.ob||void 0===F.ob?void 0:F.ob.minContribution,c("AMOUNT_HELPER_MIN",{amount:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.minContribution)})).max(null===F.ob||void 0===F.ob?void 0:F.ob.maxContribution,c("AMOUNT_HELPER_MAX",{amount:new Intl.NumberFormat("ca").format(null===F.ob||void 0===F.ob?void 0:F.ob.maxContribution)})).test("amountStep",c("AMOUNT_HELPER_STEP",{amount:null===F.ob||void 0===F.ob?void 0:F.ob.contributionStep}),(function(e){return e%(null===F.ob||void 0===F.ob?void 0:F.ob.contributionStep)===0})),iban:s.Z_().required(c("IBAN_ERROR")),iban_valid:s.Xg().required(c("IBAN_ERROR")).oneOf([!0],c("IBAN_ERROR")),sepa_accepted:s.Xg().required(c("IBAN_ERROR")).oneOf([!0],c("IBAN_ERROR"))})}),s.Ry().shape({terms_accepted:s.Xg().required(c("UNACCEPTED_TERMS")).oneOf([!0],c("UNACCEPTED_TERMS"))})],me=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),n.member.is_member){e.next=5;break}return i=(0,F.Uv)(n),e.next=5,(0,G.fP)(i).then((function(e){var i;!0===(null===e||void 0===e?void 0:e.state)?(ne(!1),n.member.number=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.soci_num):ne(!0)})).catch((function(e){var n,i,l,t;console.error(e);var a=null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.error?null===e||void 0===e||null===(l=e.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.error:{code:"UNEXPECTED"};ne(a)}));case 5:return l=(0,F.oW)(n),e.next=8,(0,G.ao)(l).then((function(e){!0===(null===e||void 0===e?void 0:e.state)?(ne(!1),ae(null===e||void 0===e?void 0:e.data)):ne(!0)})).catch((function(e){var n,i,l,t,a;console.error(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data);var o=null!==e&&void 0!==e&&null!==(i=e.response)&&void 0!==i&&null!==(l=i.data)&&void 0!==l&&l.data?null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data:{code:"UNEXPECTED"};ne(o)}));case 8:H(!1),B(4),$(!0);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsx)(m.GlobalHotKeys,{handlers:oe,keyMap:Y,children:(0,M.jsx)(u.J9,{onSubmit:function(){},enableReinitialize:!0,initialValues:re,validationSchema:de[S],validateOnMount:!0,children:function(e){return(0,M.jsx)(u.l0,{className:n.root,noValidate:!0,autoComplete:"off",children:(0,M.jsxs)(p.Z,{maxWidth:"md",disableGutters:!0,children:[(0,M.jsxs)(x.Z,{elevation:0,className:n.stepContainer,children:[0===S&&(0,M.jsx)(y,(0,l.Z)({},e)),1===S&&(0,M.jsx)(w.Z,(0,l.Z)((0,l.Z)({},e),{},{entity:"member"})),2===S&&(0,M.jsx)(D,(0,l.Z)({},e)),3===S&&(0,M.jsx)(V,(0,l.Z)({},e)),q&&(0,M.jsx)(h.Z,{mx:0,mb:1,children:ee?(0,M.jsx)(W.default,{error:ee}):(0,M.jsx)(X.default,{description:"CONTRIBUTION_OK_MSG",result:te})}),(0,M.jsx)(h.Z,{mx:0,mt:2,mb:3,children:(0,M.jsxs)("div",{className:n.actionsContainer,children:[void 0===(null===te||void 0===te?void 0:te.investment)&&(0,M.jsx)(b.Z,{"data-cy":"prev",className:n.button,startIcon:(0,M.jsx)(f.Z,{}),disabled:0===S||U,onClick:function(){return function(e){var n,i,l=S-1;2===S&&null!==e&&void 0!==e&&null!==(n=e.values)&&void 0!==n&&null!==(i=n.member)&&void 0!==i&&i.is_member?B(Math.max(S-2,0)):B(Math.max(0,l)),q&&($(!1),ne(!1)),e.submitForm().then((function(){e.validateForm(),e.setTouched({})}))}(e)},children:c("PAS_ANTERIOR")}),S<3?(0,M.jsx)(b.Z,{type:"button","data-cy":"next",className:n.button,variant:"contained",color:"primary",endIcon:(0,M.jsx)(E.Z,{}),disabled:!e.isValid,onClick:function(){return function(e){var n,i,l=S+1;0===S&&null!==e&&void 0!==e&&null!==(n=e.values)&&void 0!==n&&null!==(i=n.member)&&void 0!==i&&i.is_member&&l++,B(Math.min(l,4)),e.submitForm().then((function(){e.isValid&&(B(Math.min(l,4)),e.validateForm(),e.setTouched({}))}))}(e)},children:c("SEGUENT_PAS")}):!q&&(0,M.jsx)(b.Z,{type:"button","data-cy":"submit",className:n.button,variant:"contained",color:"primary",startIcon:U?(0,M.jsx)(_.Z,{size:24}):(0,M.jsx)(T.Z,{}),disabled:U||!e.isValid,onClick:function(){return me(e.values)},children:c("SEND")})]})})]}),R&&(0,M.jsx)(N.Z,(0,l.Z)({},e))]})})}})})},J=(0,c.Z)((function(e){return{root:{position:"relative",color:e.palette.text.primary},stepContainer:{marginTop:0,marginBottom:e.spacing(4),width:"100%",display:"flex",flexDirection:"column",backgroundColor:e.palette.backgroundColor},step:{position:"absolute",width:"100%"},actionsContainer:{display:"flex",justifyContent:"space-between"}}}))},6169:function(e,n,i){var l=i(7462),t=i(2791),a=i(5936),o=i(8302),r=t.forwardRef((function(e,n){return t.createElement(o.Z,(0,l.Z)({component:"p",variant:"body1",color:"textSecondary",ref:n},e))}));n.Z=(0,a.Z)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(r)},3594:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");n.Z=o},6199:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}),"EmailOutlined");n.Z=o},5521:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5h5.14c.38 0 .73-.21.89-.55.33-.66-.15-1.45-.89-1.45h-5.8c-.05-.33-.08-.66-.08-1s.03-.67.08-1h5.8c.38 0 .73-.21.89-.55.34-.67-.14-1.45-.89-1.45H9.24C10.32 6.92 12.5 5.5 15 5.5c1.25 0 2.42.36 3.42.97.5.31 1.15.26 1.57-.16.58-.58.45-1.53-.25-1.96C18.36 3.5 16.73 3 15 3c-3.92 0-7.24 2.51-8.48 6h-2.9c-.38 0-.73.21-.9.55-.33.67.15 1.45.9 1.45h2.44c-.04.33-.06.66-.06 1s.02.67.06 1H3.62c-.38 0-.73.21-.89.55-.34.67.14 1.45.89 1.45h2.9c1.24 3.49 4.56 6 8.48 6 1.74 0 3.36-.49 4.74-1.35.69-.43.82-1.39.24-1.97-.42-.42-1.07-.47-1.57-.15-.99.62-2.15.97-3.41.97z"}),"EuroRounded");n.Z=o},1118:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"}),"HomeOutlined");n.Z=o},8997:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"LanguageOutlined");n.Z=o},3671:function(e,n,i){var l=i(4836),t=i(5263);n.Z=void 0;var a=t(i(2791)),o=(0,l(i(4894)).default)(a.createElement("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm1 17H7V4h10v14zm-3 3h-4v-1h4v1z"}),"PhoneAndroidOutlined");n.Z=o}}]);
//# sourceMappingURL=162.0663aca4.chunk.js.map