"use strict";(self.webpackChunkwebforms_ui=self.webpackChunkwebforms_ui||[]).push([[70],{1070:function(o,e,n){n.d(e,{$o:function(){return w},C2:function(){return a},FT:function(){return k},JU:function(){return f},M7:function(){return S},Mj:function(){return s},Uv:function(){return g},XX:function(){return h},_2:function(){return M},dm:function(){return E},fQ:function(){return A},hV:function(){return b},jT:function(){return c},nZ:function(){return y},oW:function(){return O},ob:function(){return m},pe:function(){return u},vO:function(){return T},xB:function(){return C},yS:function(){return x}});var l=n(1413),i=n(3433),d=n(9299),t=n(7892),r=n.n(t),u=1e3,a="9820",v="remesa",c=100,s={es_ES:"Espa\xf1ol",ca_ES:"Catal\xe0"},m={generationMinAnnualUse:1,generationMinNumActions:1,generationMaxNumActions:49,minContribution:100,maxContribution:1e5,contributionStep:100,maxPercentOverAnnualUse:100},p=function(o){return Object.keys(o).forEach((function(e){return(null==o[e]||""===o[e]||Array.isArray(o[e])&&!o[e].length)&&delete o[e]})),o},_=function(o){var e=o.modify,n=o.contact;return{phase:null===e||void 0===e?void 0:e.phases,attachments:[].concat((0,i.Z)(null===e||void 0===e?void 0:e.attachments),(0,i.Z)(null===e||void 0===e?void 0:e.power_attachments)),power_p1:null!==e&&void 0!==e&&e.changePower?Math.round((null===e||void 0===e?void 0:e.power)*u):void 0,power_p2:null!==e&&void 0!==e&&e.changePower?Math.round((null===e||void 0===e?void 0:e.power2)*u):void 0,power_p3:null!==e&&void 0!==e&&e.changePower&&null!==e&&void 0!==e&&e.moreThan15Kw?Math.round((null===e||void 0===e?void 0:e.power3)*u):void 0,power_p4:null!==e&&void 0!==e&&e.changePower&&null!==e&&void 0!==e&&e.moreThan15Kw?Math.round((null===e||void 0===e?void 0:e.power4)*u):void 0,power_p5:null!==e&&void 0!==e&&e.changePower&&null!==e&&void 0!==e&&e.moreThan15Kw?Math.round((null===e||void 0===e?void 0:e.power5)*u):void 0,power_p6:null!==e&&void 0!==e&&e.changePower&&null!==e&&void 0!==e&&e.moreThan15Kw?Math.round((null===e||void 0===e?void 0:e.power6)*u):void 0,tariff:null!==e&&void 0!==e&&e.changePower?null===e||void 0===e?void 0:e.tariff:void 0,contact_name:null===n||void 0===n?void 0:n.contactName,contact_surname:null===n||void 0===n?void 0:n.contactSurname,contact_phone:null===n||void 0===n?void 0:n.phone}},h=function(o){var e=(0,l.Z)({},_(o));return p(e)},f=function(o){var e=null;null!==o&&void 0!==o&&o.modify&&(e=p(_(o)));var n={confirm:null===o||void 0===o?void 0:o.validate,attachments:null===o||void 0===o?void 0:o.d1Attachments,refuse_reason:null===o||void 0===o?void 0:o.refuseReason,contract_modification:null!==o&&void 0!==o&&o.modify?e:null};return p(n)},b=function(o){if(void 0!==o){var e=o[0];return-1!=="0123456789KLMXYZ".indexOf(e)}},y=function(o){var e,n,l,i,d,t,r,u,a,v,c,s,m,p,_,h,f,b,y,w,g,x,k,M,O,S,E,T,A,I,P,N,D,R,j,U,K,W,Y,Z,F,H,J,L,X,B=JSON.parse(JSON.stringify(o));(void 0!==(null===B||void 0===B||null===(e=B.supply_point)||void 0===e?void 0:e.verified)&&delete B.supply_point.verified,void 0!==(null===B||void 0===B||null===(n=B.supply_point)||void 0===n?void 0:n.supply_point_accepted)&&delete B.supply_point.supply_point_accepted,void 0!==(null===B||void 0===B||null===(l=B.supply_point)||void 0===l?void 0:l.status)&&delete B.supply_point.status,void 0!==(null===B||void 0===B||null===(i=B.holder)||void 0===i||null===(d=i.language)||void 0===d?void 0:d.code)&&(B.holder.language=B.holder.language.code),void 0!==(null===B||void 0===B||null===(t=B.holder)||void 0===t||null===(r=t.state)||void 0===r?void 0:r.id)&&(B.holder.state=parseInt(B.holder.state.id)),void 0!==(null===B||void 0===B||null===(u=B.holder)||void 0===u||null===(a=u.city)||void 0===a?void 0:a.id)&&(B.holder.city=parseInt(B.holder.city.id)),void 0!==(null===B||void 0===B||null===(v=B.holder)||void 0===v?void 0:v.vatexists)&&delete B.holder.vatexists,void 0!==(null===B||void 0===B||null===(c=B.holder)||void 0===c?void 0:c.vatvalid)&&delete B.holder.vatvalid,void 0!==(null===B||void 0===B||null===(s=B.holder)||void 0===s?void 0:s.isphisical))&&(!0===(null===B||void 0===B||null===(N=B.holder)||void 0===N?void 0:N.isphisical)?(delete B.holder.proxynif,delete B.holder.proxyname):(delete B.holder.surname1,delete B.holder.surname2),delete B.holder.isphisical,delete B.holder.proxynif_phisical);(B.holder.address="".concat(null===(m=B.holder)||void 0===m?void 0:m.address,", ").concat(null===(p=B.holder)||void 0===p?void 0:p.number," ").concat(null===(_=B.holder)||void 0===_?void 0:_.floor," ").concat(null===(h=B.holder)||void 0===h?void 0:h.door).trim(),void 0!==(null===(f=B.holder)||void 0===f?void 0:f.number)&&(null===(b=B.holder)||void 0===b||delete b.number),void 0!==(null===(y=B.holder)||void 0===y?void 0:y.floor)&&(null===(w=B.holder)||void 0===w||delete w.floor),void 0!==(null===(g=B.holder)||void 0===g?void 0:g.door)&&(null===(x=B.holder)||void 0===x||delete x.door),""===(null===B||void 0===B||null===(k=B.holder)||void 0===k?void 0:k.phone2)&&delete B.holder.phone2,void 0!==(null===B||void 0===B||null===(M=B.holder)||void 0===M?void 0:M.proxynif_valid)&&delete B.holder.proxynif_valid,"name"in(null===B||void 0===B?void 0:B.member))&&(null===B||void 0===B||(null===(D=B.member)||void 0===D||delete D.name),null===B||void 0===B||(null===(R=B.member)||void 0===R||delete R.address),null===B||void 0===B||(null===(j=B.member)||void 0===j||delete j.postal_code),null===B||void 0===B||(null===(U=B.member)||void 0===U||delete U.state),null===B||void 0===B||(null===(K=B.member)||void 0===K||delete K.city),null===B||void 0===B||(null===(W=B.member)||void 0===W||delete W.surname1),null===B||void 0===B||(null===(Y=B.member)||void 0===Y||delete Y.email),null===B||void 0===B||(null===(Z=B.member)||void 0===Z||delete Z.phone1),null===B||void 0===B||(null===(F=B.member)||void 0===F||delete F.phone2),null===B||void 0===B||(null===(H=B.member)||void 0===H||delete H.language),null===B||void 0===B||(null===(J=B.member)||void 0===J||delete J.checked),null===B||void 0===B||(null===(L=B.member)||void 0===L||delete L.full_name));(null!==B&&void 0!==B&&null!==(O=B.holder)&&void 0!==O&&O.ismember?(B.member.become_member=!1,B.member.link_member=!1):C(null===B||void 0===B||null===(S=B.holder)||void 0===S?void 0:S.vat)&&(B.member.become_member=!1,B.member.link_member=!0),"ismember"in(null===B||void 0===B?void 0:B.holder)&&delete B.holder.ismember,null!==B&&void 0!==B&&null!==(E=B.member)&&void 0!==E&&E.link_member||("vat"in(null===B||void 0===B?void 0:B.member)&&delete B.member.vat,"number"in(null===B||void 0===B?void 0:B.member)&&delete B.member.number),void 0!==(null===B||void 0===B||null===(T=B.member)||void 0===T?void 0:T.checked))&&(null===B||void 0===B||(null===(X=B.member)||void 0===X||delete X.checked));if(void 0!==(null===B||void 0===B?void 0:B.legal_person_accepted)&&delete B.legal_person_accepted,null!==B&&void 0!==B&&null!==(A=B.payment)&&void 0!==A&&A.iban&&(B.payment.iban=B.payment.iban.split(" ").join("")),void 0!==(null===B||void 0===B||null===(I=B.payment)||void 0===I?void 0:I.iban_valid)&&delete B.payment.iban_valid,null!==B&&void 0!==B&&B.especial_cases&&null!==B&&void 0!==B&&null!==(P=B.especial_cases)&&void 0!==P&&P.attachments)if(delete B.especial_cases.reason_default,Object.keys(B.especial_cases).map((function(o){return 0===o.indexOf("reason")&&!0===B.especial_cases[o]})).reduce((function(o,e){return o||e}))){var q,Q,V,$,z,G,oo,eo,no,lo,io,to,ro,uo,ao,vo;if(null!==B&&void 0!==B&&null!==(q=B.especial_cases)&&void 0!==q&&null!==(Q=q.attachments)&&void 0!==Q&&Q.death)B.especial_cases.attachments.death=null===B||void 0===B||null===(no=B.especial_cases)||void 0===no||null===(lo=no.attachments)||void 0===lo?void 0:lo.death[0];if(null!==B&&void 0!==B&&null!==(V=B.especial_cases)&&void 0!==V&&null!==($=V.attachments)&&void 0!==$&&$.medical)B.especial_cases.attachments.medical=null===B||void 0===B||null===(io=B.especial_cases)||void 0===io||null===(to=io.attachments)||void 0===to?void 0:to.medical[0];if(null!==B&&void 0!==B&&null!==(z=B.especial_cases)&&void 0!==z&&null!==(G=z.attachments)&&void 0!==G&&G.resident)B.especial_cases.attachments.resident=null===B||void 0===B||null===(ro=B.especial_cases)||void 0===ro||null===(uo=ro.attachments)||void 0===uo?void 0:uo.resident[0];if(null!==B&&void 0!==B&&null!==(oo=B.especial_cases)&&void 0!==oo&&null!==(eo=oo.attachments)&&void 0!==eo&&eo.merge)B.especial_cases.attachments.merge=null===B||void 0===B||null===(ao=B.especial_cases)||void 0===ao||null===(vo=ao.attachments)||void 0===vo?void 0:vo.merge[0]}else delete B.especial_cases.attachments;return B},w=function(o){var e,n,l,i,t,r,a,v,c,s,m,_,h,f,b,y,w,g,x,k,M,O,S,E,T,A,C,I,P,N,D={},R=o.holder;D.member_number=null===o||void 0===o||null===(e=o.member)||void 0===e?void 0:e.number,D.member_vat=null===o||void 0===o||null===(n=o.member)||void 0===n?void 0:n.vat,D.cups=null===o||void 0===o||null===(l=o.supply_point)||void 0===l?void 0:l.cups,D.is_indexed=null===o||void 0===o||null===(i=o.contract)||void 0===i?void 0:i.isIndexed,D.tariff=null===o||void 0===o||null===(t=o.contract)||void 0===t?void 0:t.rate;var j,U,K,W,Y,Z,F,H,J,L,X,B,q,Q,V,$,z,G,oo=(0,d.jS)(),eo=null===oo||void 0===oo?void 0:oo[D.tariff];if(null!==eo&&void 0!==eo&&eo.num_power_periods)for(var no=1;no<=(null===eo||void 0===eo?void 0:eo.num_power_periods);no++){var lo,io="power_p".concat(no),to="power".concat(no>1?no:"");D[io]=Math.round((null===o||void 0===o||null===(lo=o.contract)||void 0===lo?void 0:lo[to])*u).toString()}(D.cups_address="".concat(null===o||void 0===o||null===(r=o.supply_point)||void 0===r?void 0:r.address,", ").concat(null===o||void 0===o||null===(a=o.supply_point)||void 0===a?void 0:a.number," ").concat(null===o||void 0===o||null===(v=o.supply_point)||void 0===v?void 0:v.floor," ").concat(null===o||void 0===o||null===(c=o.supply_point)||void 0===c?void 0:c.door).trim(),D.cups_postal_code=null===o||void 0===o||null===(s=o.supply_point)||void 0===s?void 0:s.postal_code,D.cups_city_id=null!==o&&void 0!==o&&null!==(m=o.supply_point)&&void 0!==m&&null!==(_=m.city)&&void 0!==_&&_.id?parseInt(null===o||void 0===o||null===(h=o.supply_point)||void 0===h||null===(f=h.city)||void 0===f?void 0:f.id):0,D.cups_state_id=null!==o&&void 0!==o&&null!==(b=o.supply_point)&&void 0!==b&&null!==(y=b.state)&&void 0!==y&&y.id?parseInt(null===o||void 0===o||null===(w=o.supply_point)||void 0===w||null===(g=w.state)||void 0===g?void 0:g.id):0,D.cups_cadastral_reference=null!==o&&void 0!==o&&null!==(x=o.supply_point)&&void 0!==x&&x.cadastral_reference?o.supply_point.cadastral_reference.replace(/ /g,""):"",D.cnae=null===o||void 0===o||null===(k=o.supply_point)||void 0===k?void 0:k.cnae,D.supply_point_accepted=null===o||void 0===o||null===(M=o.supply_point)||void 0===M?void 0:M.supply_point_accepted,D.owner_is_member=(null===R||void 0===R?void 0:R.vat)===(null===o||void 0===o||null===(O=o.member)||void 0===O?void 0:O.vat)&&(null===R||void 0===R?void 0:R.isphisical),D.owner_is_member)||(D.contract_owner={},D.contract_owner.is_juridic=!(null!==o&&void 0!==o&&null!==(j=o.holder)&&void 0!==j&&j.isphisical),D.contract_owner.vat=null===R||void 0===R?void 0:R.vat,D.contract_owner.name=null===R||void 0===R?void 0:R.name,D.contract_owner.surname="".concat(null===R||void 0===R?void 0:R.surname1," ").concat(null===R||void 0===R?void 0:R.surname2).trim(),D.contract_owner.proxy_vat=null!==o&&void 0!==o&&null!==(U=o.holder)&&void 0!==U&&U.isphisical||null===R||void 0===R?void 0:R.proxynif,D.contract_owner.proxy_name=null!==o&&void 0!==o&&null!==(K=o.holder)&&void 0!==K&&K.isphisical||null===R||void 0===R?void 0:R.proxyname,D.contract_owner.address=o.holder.vat===o.member.vat&&!0===o.holder.isphisical?o.member.address:"".concat(null===(W=o.holder)||void 0===W?void 0:W.address,", ").concat(null===(Y=o.holder)||void 0===Y?void 0:Y.number," ").concat(null===(Z=o.holder)||void 0===Z?void 0:Z.floor," ").concat(null===(F=o.holder)||void 0===F?void 0:F.door).trim(),D.contract_owner.city_id=null!==R&&void 0!==R&&null!==(H=R.city)&&void 0!==H&&H.id?parseInt(null===R||void 0===R||null===(J=R.city)||void 0===J?void 0:J.id):0,D.contract_owner.state_id=null!==R&&void 0!==R&&null!==(L=R.state)&&void 0!==L&&L.id?parseInt(null===R||void 0===R||null===(X=R.state)||void 0===X?void 0:X.id):0,D.contract_owner.postal_code=null===R||void 0===R?void 0:R.postal_code,D.contract_owner.email=null===R||void 0===R?void 0:R.email,D.contract_owner.phone=null===R||void 0===R?void 0:R.phone1,D.contract_owner.phone2=null===R||void 0===R?void 0:R.phone2,D.contract_owner.lang=null===R||void 0===R?void 0:R.language,D.contract_owner.privacy_conditions=null===o||void 0===o?void 0:o.privacy_policy_accepted,D.contract_owner=p(D.contract_owner));(D.owner_is_payer=!0,D.owner_is_payer||(D.contract_payer={}),D.payment_iban=null===o||void 0===o||null===(S=o.payment)||void 0===S?void 0:S.iban,D.sepa_conditions=null===o||void 0===o||null===(E=o.payment)||void 0===E?void 0:E.sepa_accepted,D.donation=null===o||void 0===o||null===(T=o.payment)||void 0===T?void 0:T.voluntary_cent,D.process=null!==o&&void 0!==o&&null!==(A=o.contract)&&void 0!==A&&A.has_service?null!==o&&void 0!==o&&null!==(C=o.holder)&&void 0!==C&&C.previous_holder?"C1":"C2":"A3",D.attachments=null===o||void 0===o||null===(I=o.supply_point)||void 0===I?void 0:I.attachments,D.general_contract_terms_accepted=null===o||void 0===o?void 0:o.terms_accepted,null!==o&&void 0!==o&&null!==(P=o.contract)&&void 0!==P&&P.isIndexed&&(D.indexed_specific_terms_accepted=null===o||void 0===o?void 0:o.terms_accepted),D.particular_contract_terms_accepted=null===o||void 0===o?void 0:o.particular_contract_terms_accepted,null!==o&&void 0!==o&&null!==(N=o.self_consumption)&&void 0!==N&&N.have_installation)&&(D.self_consumption={},D.self_consumption.cau=null===o||void 0===o||null===(B=o.self_consumption)||void 0===B?void 0:B.cau.replace(/ /g,""),D.self_consumption.collective_installation=null===o||void 0===o||null===(q=o.self_consumption)||void 0===q?void 0:q.collective_installation,D.self_consumption.installation_power=Math.round((null===o||void 0===o||null===(Q=o.self_consumption)||void 0===Q?void 0:Q.installation_power)*u).toString(),D.self_consumption.installation_type=null===o||void 0===o||null===(V=o.self_consumption)||void 0===V?void 0:V.installation_type,D.self_consumption.technology=null===o||void 0===o||null===($=o.self_consumption)||void 0===$?void 0:$.technology,D.self_consumption.aux_services=null===o||void 0===o||null===(z=o.self_consumption)||void 0===z?void 0:z.aux_services,D.self_consumption.attachments=null===o||void 0===o||null===(G=o.self_consumption)||void 0===G?void 0:G.attachments,D.self_consumption=p(D.self_consumption));return p(D)},g=function(o){var e,n,l,i,d={};if(d.tipuspersona=o.member.isphisical?"fisica":"juridica",d.nom=o.member.name,d.dni=o.member.vat,d.tel=o.member.phone1,d.tel2=o.member.phone2||"",d.email=o.member.email,d.cp=o.member.postal_code,d.provincia=o.member.state.id,d.adreca="".concat(null===(e=o.member)||void 0===e?void 0:e.address,", ").concat(null===(n=o.member)||void 0===n?void 0:n.number," ").concat(null===(l=o.member)||void 0===l?void 0:l.floor," ").concat(null===(i=o.member)||void 0===i?void 0:i.door).trim(),d.municipi=o.member.city.id,d.idioma=o.member.language,d.payment_method="iban"===o.payment.payment_method?v:"credit_card"===o.payment.payment_method?"tpv":v,d.payment_iban=o.payment.iban,d.urlok=o.urlok,d.urlko=o.urlko,o.member.isphisical){var t="".concat(o.member.surname1," ").concat(o.member.surname2);d.cognom=t.trim()}else d.representant_nom=o.member.proxyname,d.representant_dni=o.member.proxynif;return d},x=function(o){return o.moreThan15Kw?"3.0TD":"2.0TD"},k=function(o,e){var n,l,i,d,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"min_power",r=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,a=(null===e||void 0===e?void 0:e.rate)||(null===e||void 0===e?void 0:e.tariff),v=0,c=!1;if(void 0===o[a])return!0;for(var s=1;s<=(null===(m=o[a])||void 0===m?void 0:m.num_power_periods);s++){var m,p,_,h=1===s?"power":"power".concat(s);if(t.match("min"))c=e[h]>=(null===(p=o[a][t])||void 0===p?void 0:p.power);else c="2.0TD"!=a||e[h]<=(null===(_=o[a][t])||void 0===_?void 0:_.power);c&&v++,void 0===e[h]&&v++}if(v>=(null===(n=o[a][t])||void 0===n?void 0:n.num_periods_apply))return!0;var f=(null===(l=o[a])||void 0===l?void 0:l.num_power_periods)>(null===(i=o[a][t])||void 0===i?void 0:i.num_periods_apply)?"SOME_PERIOD_MORE_THAN":"POWER_NO_LESS_THAN";return r({message:u(t.match("min")?f:"POWER_NO_MORE_THAN",{value:null===(d=o[a][t])||void 0===d?void 0:d.power})})},M={token:"no-token",installed_power:"3.5",cil:"ES13984U932824DF",installation_type:"Red interior",subsection:"Con excedentes y mecanismo de compensaci\xf3n simplificado",cau:"ES1334985UDSFW984U932824DF",collective:!1,generator_technology:"[B11] - Instalaciones que \xfanicamente utilicen la radiaci\xf3n solar como energ\xeda primaria mediante la tecnolog\xeda fotovoltaica",ssaa:"true",register_section:"Con excedentes",to_validate:!0,case_id:""},O=function(o,e){var n,l,i,d,t,r,u={};(u.socinumber=null===o||void 0===o||null===(n=o.member)||void 0===n?void 0:n.number,u.dni=null===o||void 0===o||null===(l=o.member)||void 0===l?void 0:l.vat,u.accountbankiban=null===o||void 0===o||null===(i=o.payment)||void 0===i?void 0:i.iban,u.amount=parseInt(null===o||void 0===o||null===(d=o.payment)||void 0===d?void 0:d.amount),e)?(u.socinumber=null===o||void 0===o||null===(t=o.member)||void 0===t?void 0:t.partner_number,u.signaturit=null===o||void 0===o?void 0:o.signaturit,u.mandate_name=null===o||void 0===o?void 0:o.mandate_name,u.acceptaccountowner="1"):u.acceptaccountowner=null!==o&&void 0!==o&&null!==(r=o.payment)&&void 0!==r&&r.sepa_accepted?1:0;return u},S=function(o,e,l){var i=n(6930);r().extend(i);for(var d=r()(o),t=[],u=1;t.length<e;u++){var a=d.add(u,"day"),v=a.isoWeekday();if(6!==v&&7!==v){var c=a.format("YYYY-MM-DD");l.includes(c)||t.push(c)}}return t},E=function(o){return new RegExp(/^[\w\s]*(2\.0)\w*/g).test(o)},T=function(o){return new RegExp(/^[\w\s]*(3\.0)\w*/g).test(o)},A=function(o){return o.toLowerCase().match(/ndex/)},C=function(o){return/^H/.test(o)}}}]);
//# sourceMappingURL=70.b2a46185.chunk.js.map