"use strict";(self.webpackChunkwebforms_ui=self.webpackChunkwebforms_ui||[]).push([[802],{1802:function(e,a,l){l.r(a),l.d(a,{default:function(){return re}});var n=l(4165),s=l(5861),i=l(1413),t=l(9439),o=l(2791),r=l(3168),d=l(7325),c=l(5173),u=l(2797),_=l(7689),p=l(8596),v=l(6513),m=l(4265),h=l(5720),E=l(3712),x=l(4446),C=l(9526),R=l(9329),T=l(6716),A=l(2439),I=l(8302),f=l(2130),j=l(6782),Z=l(293),N=l(7369),g=l(184);var S=function(e){var a,l,n,s,i,t,o,d,c,u=e.values,_=e.setFieldValue,p=e.setFieldTouched,v=e.handleBlur,h=e.touched,E=e.errors,x=(0,r.$)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:x("HOLDER_CHANGE")}),(0,g.jsxs)(m.Z,{className:"step-body",children:[(0,g.jsx)(m.Z,{dangerouslySetInnerHTML:{__html:x("FILL_VAT")}}),(0,g.jsx)(m.Z,{mt:3,mb:1,children:(0,g.jsx)(N.Z,{id:"vat",name:"holder.vat",label:x("VAT_HOLDERCHANGE_LABEL"),variant:"outlined",fullWidth:!0,required:!0,autoFocus:!1,value:null===u||void 0===u||null===(a=u.holder)||void 0===a?void 0:a.vat,onChange:function(e){var a=e.vat,l=e.isPhisical,n=e.valid,s=e.isMember;_("holder.vat",a),_("holder.isphisical",l),_("holder.vatvalid",n),p("holder.vat",!0),_("holder.ismember",s)},onBlur:v,error:(null===E||void 0===E||null===(l=E.holder)||void 0===l?void 0:l.vat)&&(null===h||void 0===h||null===(n=h.holder)||void 0===n?void 0:n.vat)||(null===h||void 0===h||null===(s=h.holder)||void 0===s?void 0:s.vat)&&!1===(null===u||void 0===u||null===(i=u.holder)||void 0===i?void 0:i.vatvalid),helperText:(null===h||void 0===h||null===(t=h.holder)||void 0===t?void 0:t.vat)&&(null===E||void 0===E||null===(o=E.holder)||void 0===o?void 0:o.vat)||(null===h||void 0===h||null===(d=h.holder)||void 0===d?void 0:d.vat)&&(null===E||void 0===E||null===(c=E.holder)||void 0===c?void 0:c.vatvalid)})}),(0,g.jsx)(m.Z,{mt:4,mb:3,children:(0,g.jsx)(j.Z,{dangerouslySetInnerHTML:{__html:x("NO_VAT_HELP")}})})]})]})},O=l(5247),b=l(4135),y=l(4279),L=l(9626),P=l(9650),D=l(9299),M=l(442);var U=function(e){var a,l,n,s,i,d,c,u,_=(0,r.$)().t,p=e.values,v=e.setFieldValue,E=e.setTouched,x=e.handleChange,C=e.validateForm,R=e.handleBlur,T=e.errors,A=e.touched,f=(0,o.useState)(!1),N=(0,t.Z)(f,2),S=N[0],U=N[1],H=(0,o.useState)(!1),F=(0,t.Z)(H,2),B=F[0],Y=F[1],k=function(){var e;return"active"===(null===p||void 0===p||null===(e=p.supply_point)||void 0===e?void 0:e.status)};(0,o.useEffect)((function(){var e=p.supply_point.cups;e.length>18?(U(!0),(0,D.s1)(e).then((function(e){var a,l,n,s=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.status;"active"===s&&(v("supply_point.address",null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.address,!1),v("supply_point.tariff_type",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.tariff_type,!1));E({supply_point:{cups:!0}},!1),v("supply_point.status",s,!0),C(),U(!1)})).catch((function(e){var a,l,n,s,i,t;console.error(e.response);var o=null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(l=a.data)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.status?null===e||void 0===e||null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.status:"error";v("supply_point.status",o),C(),U(!1)}))):v("supply_point.status","error")}),[p.supply_point.cups,v,C,E]);var q=function(){return(0,g.jsx)("a",{href:_("CUPS_HELP_URL"),target:"_blank",rel:"noopener noreferrer",children:_("CUPS_HELP")})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:_("CUPS_TITLE")}),(0,g.jsxs)(m.Z,{className:"step-body",children:[(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:_("FILL_CUPS")}}),(0,g.jsx)(m.Z,{mt:3,mb:1,children:(0,g.jsx)(L.Z,{id:"cups",name:"supply_point.cups",label:_("CUPS_LABEL"),variant:"outlined",fullWidth:!0,required:!0,value:null===p||void 0===p||null===(a=p.supply_point)||void 0===a?void 0:a.cups,onChange:function(e){var a;null!==(a=p.supply_point)&&void 0!==a&&a.verified&&v("supply_point.verified",!1);var l=e.target.value.match(/[0-9A-Za-z]{0,22}/);l=l[0].toUpperCase(),v("supply_point.cups",l,!0)},onBlur:R,error:!S&&(null===T||void 0===T||null===(l=T.supply_point)||void 0===l?void 0:l.cups)&&(null===A||void 0===A||null===(n=A.supply_point)||void 0===n?void 0:n.cups),helperText:!S&&(null===A||void 0===A||null===(s=A.supply_point)||void 0===s?void 0:s.cups)&&(null===T||void 0===T||null===(i=T.supply_point)||void 0===i?void 0:i.cups)||(0,g.jsx)(q,{}),InputProps:{endAdornment:(0,g.jsxs)(y.Z,{position:"end",children:[S&&(0,g.jsx)(h.Z,{size:24}),!S&&k()&&(0,g.jsx)(P.Z,{color:"primary"})]})}})}),(0,g.jsx)(m.Z,{mt:3,mb:1,children:(0,g.jsx)(L.Z,{id:"cupsaddress",label:_("SUPPLY_POINT_ADDRESS"),variant:"outlined",fullWidth:!0,disabled:!0,value:null===p||void 0===p||null===(d=p.supply_point)||void 0===d?void 0:d.address,helperText:_("CUPS_PARTIAL_ADDRESS_NOTICE")})}),(0,g.jsx)(m.Z,{mt:3,mb:0,mx:1,children:(0,g.jsx)(b.Z,{disabled:!k(),control:(0,g.jsx)(O.Z,{id:"supply_point_accepted",color:"primary",name:"supply_point_accepted",onClick:function(e){e.preventDefault(),Y(!0)},checked:null===p||void 0===p||null===(c=p.supply_point)||void 0===c?void 0:c.supply_point_accepted,value:!0}),label:_("FAIR_TITLE_LABEL")})}),(0,g.jsx)(m.Z,{mx:1,mt:0,mb:2,children:(0,g.jsx)(b.Z,{disabled:!k(),control:(0,g.jsx)(O.Z,{name:"supply_point.verified",onChange:x,checked:null===p||void 0===p||null===(u=p.supply_point)||void 0===u?void 0:u.verified,color:"primary"}),label:_("CUPS_VERIFY_LABEL")})}),(0,g.jsx)(m.Z,{ml:1,children:(0,g.jsx)(j.Z,{dangerouslySetInnerHTML:{__html:_("CUPS_NO_VERIFY_HELP")}})})]}),(0,g.jsx)(M.Z,{title:_("FAIR_TITLE"),open:B,onAccept:function(){Y(!1),v("supply_point.supply_point_accepted",!0)},onClose:function(){Y(!1),v("supply_point.supply_point_accepted",!1)},maxWidth:"sm",children:(0,g.jsx)("span",{dangerouslySetInnerHTML:{__html:_("PRIVACY_POLICY_SUPLYPOINT")}})})]})},H=l(4307),F=l(8952);var B=function(e){var a=(0,r.$)().t,l=e.setFieldValue;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:a("BECOME_MEMBER_TITLE")}),(0,g.jsxs)(m.Z,{className:"step-body",children:[(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:a("BECOME_MEMBER_PRESENTATION")},variantMapping:{body1:"div"}}),(0,g.jsx)(m.Z,{mt:3,mb:4,children:(0,g.jsx)(F.Z,{question:a("BECOME_MEMBER_QUESTION"),onChange:function(e){var a=e.option;l("member.link_member",!a,!1),l("member.become_member",a)},value:e.values.member.become_member,options:[{value:!0,label:a("BECOME_MEMBER_YES_LABEL"),description:a("BECOME_MEMBER_YES_DESCRIPTION")},{value:!1,label:a("BECOME_MEMBER_NO_LABEL"),description:a("BECOME_MEMBER_NO_DESCRIPTION")}],canBeEmpty:!1})}),(0,g.jsx)(j.Z,{dangerouslySetInnerHTML:{__html:a("MEMBER_ENERGETICA_HELPER")}})]})]})},Y=l(3725),k=l(8182),q=l(6828),V=l(9861),X=l(5815),w=(0,p.Z)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{marginTop:e.spacing(3)},container:{width:"100%"},chooserItem:{display:"block",cursor:"pointer",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingRight:e.spacing(3),paddingLeft:e.spacing(3),margin:"1px 1px 9px 1px",border:"1px solid rgba(0, 0, 0, 0.12)","&:not(.Mui-disabled):hover":{border:"1px solid rgba(0, 0, 0, 0.87)",backgroundColor:"rgba(0, 0, 0, 0.03)"},height:"100%"},chooserItemSelected:{border:"2px solid #96b633",backgroundColor:"rgba(150, 182, 51, 0.08)",margin:"0 0 8px 0","&:not(.Mui-disabled):hover":{border:"2px solid #96b633",backgroundColor:"rgba(150, 182, 51, 0.08)"},"& span:last-child":{fontWeight:"bold",opacity:"0.75"}},chooserItemTitle:{display:"flex",alignItems:"center"},chooserItemDesc:{marginTop:e.spacing(1),paddingLeft:e.spacing(1)},attachmentTitle:{paddingLeft:e.spacing(1)}}})),G=function(e){var a,l,n,s,t,o,d,c,u,_,p,v,h,E,x,C,R=w(),T=(0,r.$)().t,A=e.values,f=e.errors,j=e.touched,N=e.setFieldValue,S=function(e){"especial_cases.reason_death"===e.target.name?(N("especial_cases.reason_default",!1,!1),!0===A.especial_cases.reason_death&&N("especial_cases.attachments.death",[],!1),!0===A.especial_cases.reason_merge&&N("especial_cases.reason_merge",!1,!1),N("especial_cases.reason_death",!A.especial_cases.reason_death,!0)):"especial_cases.reason_merge"===e.target.name?(N("especial_cases.reason_default",!1,!1),N("especial_cases.reason_electrodep",!1,!1),!0===A.especial_cases.reason_death&&(N("especial_cases.reason_death",!1,!1),N("especial_cases.attachments.death",[],!1)),N("especial_cases.reason_merge",!A.especial_cases.reason_merge,!0)):"especial_cases.reason_electrodep"===e.target.name?(N("especial_cases.reason_default",!1,!1),!0===A.especial_cases.reason_electrodep&&(N("especial_cases.attachments.medical",[],!1),N("especial_cases.attachments.resident",[],!1)),N("especial_cases.reason_electrodep",!A.especial_cases.reason_electrodep,!0)):N("especial_cases",(0,i.Z)((0,i.Z)({},A.especial_cases),{},{reason_default:!0,reason_death:!1,reason_merge:!1,reason_electrodep:!1,attachments:{death:[],merge:[],medical:[],resident:[]}}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:T("SPECIAL_CASES_TITLE")}),(0,g.jsx)(m.Z,{className:"step-body",children:(0,g.jsx)(q.Z,{component:"fieldset",className:R.container,children:(0,g.jsxs)(V.Z,{children:[(0,g.jsx)(b.Z,{control:(0,g.jsx)(O.Z,{checked:null===(a=A.especial_cases)||void 0===a?void 0:a.reason_default,onChange:S,name:"especial_cases.reason_default",color:"primary"}),label:T("SPECIAL_CASES_REASON_DEFAULT"),className:(0,k.Z)(R.chooserItem,(null===(l=A.especial_cases)||void 0===l?void 0:l.reason_default)&&R.chooserItemSelected)}),(0,g.jsx)(m.Z,{mt:1,mb:3,children:(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:T("SPECIAL_CASES_QUESTION")}})}),(0,g.jsx)(b.Z,{control:(0,g.jsx)(O.Z,{checked:null===(n=A.especial_cases)||void 0===n?void 0:n.reason_death,onChange:S,name:"especial_cases.reason_death",color:"primary"}),label:T("SPECIAL_CASES_REASON_DEATH"),className:(0,k.Z)(R.chooserItem,(null===(s=A.especial_cases)||void 0===s?void 0:s.reason_death)&&R.chooserItemSelected)}),(null===(t=A.especial_cases)||void 0===t?void 0:t.reason_death)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.Z,{className:R.attachmentTitle,children:T("CERT_ATTACH_DEATH")}),(0,g.jsx)(m.Z,{mt:1,mb:2,children:(0,g.jsx)(X.Z,{fieldError:f.attachments&&j.attachments&&f.attachments,callbackFn:function(e){return N("especial_cases.attachments.death",e)},values:null===(o=A.especial_cases.attachments)||void 0===o?void 0:o.death})})]}),(0,g.jsx)(b.Z,{control:(0,g.jsx)(O.Z,{checked:null===(d=A.especial_cases)||void 0===d?void 0:d.reason_merge,onChange:S,name:"especial_cases.reason_merge",color:"primary"}),label:T("SPECIAL_CASES_REASON_MERGE"),className:(0,k.Z)(R.chooserItem,(null===(c=A.especial_cases)||void 0===c?void 0:c.reason_merge)&&R.chooserItemSelected)}),(null===(u=A.especial_cases)||void 0===u?void 0:u.reason_merge)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.Z,{className:R.attachmentTitle,children:T("CERT_ATTACH_MERGE")}),(0,g.jsx)(m.Z,{mt:1,mb:2,children:(0,g.jsx)(X.Z,{fieldError:f.attachments&&j.attachments&&f.attachments,callbackFn:function(e){return N("especial_cases.attachments.merge",e)},values:null===(_=A.especial_cases.attachments)||void 0===_?void 0:_.merge})})]}),(0,g.jsx)(b.Z,{disabled:null===(p=A.especial_cases)||void 0===p?void 0:p.reason_merge,control:(0,g.jsx)(O.Z,{checked:null===(v=A.especial_cases)||void 0===v?void 0:v.reason_electrodep,onChange:S,name:"especial_cases.reason_electrodep",color:"primary"}),label:T("SPECIAL_CASES_REASON_ELECTRODEP"),className:(0,k.Z)(R.chooserItem,(null===(h=A.especial_cases)||void 0===h?void 0:h.reason_electrodep)&&R.chooserItemSelected)}),(null===(E=A.especial_cases)||void 0===E?void 0:E.reason_electrodep)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.Z,{className:R.attachmentTitle,children:T("ELECTRODEP_ATTACH_MEDICAL")}),(0,g.jsx)(m.Z,{mt:1,mb:1,children:(0,g.jsx)(X.Z,{fieldError:f.attachments&&j.attachments&&f.attachments,callbackFn:function(e){return N("especial_cases.attachments.medical",e)},values:null===(x=A.especial_cases.attachments)||void 0===x?void 0:x.medical})}),(0,g.jsx)(I.Z,{className:R.attachmentTitle,children:T("ELECTRODEP_ATTACH_RESIDENT")}),(0,g.jsx)(m.Z,{mt:1,mb:0,children:(0,g.jsx)(X.Z,{fieldError:f.attachments&&j.attachments&&f.attachments,callbackFn:function(e){return N("especial_cases.attachments.resident",e)},values:null===(C=A.especial_cases.attachments)||void 0===C?void 0:C.resident})})]})]})})})]})},W=l(9753),Q=l(7447),z=l(1288),$=l(4345),K=l(1070),J=(0,p.Z)((function(e){return{withoutLabel:{marginTop:e.spacing(1)},sectionTitle:{fontSize:"18px",fontWeight:500,textTransform:"uppercase",marginTop:e.spacing(2),marginBottom:e.spacing(1.2)},field:{display:"flex",alignItems:"center",marginBottom:e.spacing(.8)},label:{textTransform:"uppercase",paddingRight:"12px",fontSize:"14px",fontWeight:400,color:"rgba(0, 0, 0, 0.54)"},value:{fontSize:"16px"},divider:{marginTop:"12px",marginLeft:0,marginRight:"32px"},dividerBottom:{marginTop:"24px",marginLeft:0,marginRight:"32px"}}})),ee=function(e){var a,l,n,s,i,d,c,u,_,p,v,h,E,x,C,R,T,A,f,N,S,y,L,P,D,U,H,F,B,Y,k,q,V,X=J(),w=(0,r.$)().t,G=e.values,W=e.setFieldValue,ee=(0,o.useState)(!1),ae=(0,t.Z)(ee,2),le=ae[0],ne=ae[1],se=function(e){var a=e.label,l=e.value;return(0,g.jsxs)("div",{className:X.field,children:[(0,g.jsx)("div",{className:"field__title",children:(0,g.jsx)(I.Z,{className:X.label,variant:"subtitle2",children:a})}),(0,g.jsx)("div",{className:"field__value",children:(0,g.jsx)(I.Z,{className:X.value,variant:"body2",children:l})})]})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:w("REVIEW_TITLE")}),(0,g.jsxs)(m.Z,{className:"step-body",children:[(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:w("REVIEW_DESCRIPTION")}}),(0,g.jsxs)(z.Z,{container:!0,children:[(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("SUMMARY_GROUP_PROCESS")}),(0,g.jsx)(se,{label:w("PROCESS_TYPE"),value:w("PROCESS_TYPE_HOLDER_CHANGE")}),(null===G||void 0===G||null===(a=G.especial_cases)||void 0===a?void 0:a.reason_death)&&(0,g.jsx)(se,{label:w("SPECIAL_CASES_TITLE"),value:w("SPECIAL_CASES_DEATH")}),(null===G||void 0===G||null===(l=G.especial_cases)||void 0===l?void 0:l.reason_merge)&&(0,g.jsx)(se,{label:w("SPECIAL_CASES_TITLE"),value:w("SPECIAL_CASES_MERGE")}),(null===G||void 0===G||null===(n=G.especial_cases)||void 0===n?void 0:n.reason_electrodep)&&(0,g.jsx)(se,{label:w("SPECIAL_CASES_TITLE"),value:w("SPECIAL_CASES_ELECTRODEP")}),(0,g.jsx)(se,{label:w("RELATED_MEMBER"),value:(null===G||void 0===G||null===(s=G.member)||void 0===s?void 0:s.become_member)&&"".concat(null===G||void 0===G||null===(i=G.holder)||void 0===i?void 0:i.name," ").concat(null===G||void 0===G||null===(d=G.holder)||void 0===d?void 0:d.surname1," ").concat(null===G||void 0===G||null===(c=G.holder)||void 0===c?void 0:c.surname2)||(null===G||void 0===G||null===(u=G.holder)||void 0===u?void 0:u.ismember)&&(null===G||void 0===G?void 0:G.holder.vat)||(null===G||void 0===G||null===(_=G.member)||void 0===_?void 0:_.vat)})]}),(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("SUPPLY")}),(0,g.jsx)(se,{label:w("CUPS_LABEL"),value:null===G||void 0===G||null===(p=G.supply_point)||void 0===p?void 0:p.cups}),(0,g.jsx)(se,{label:w("ADDRESS"),value:null===G||void 0===G||null===(v=G.supply_point)||void 0===v?void 0:v.address})]}),(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(Q.Z,{variant:"middle",className:X.divider}),(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("HOLDER")}),(0,g.jsx)(se,{label:"NIF",value:null===G||void 0===G||null===(h=G.holder)||void 0===h?void 0:h.vat}),null!==G&&void 0!==G&&null!==(E=G.holder)&&void 0!==E&&E.isphisical?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(se,{label:w("NAME"),value:"".concat(null===G||void 0===G||null===(x=G.holder)||void 0===x?void 0:x.name," ").concat(null===G||void 0===G||null===(C=G.holder)||void 0===C?void 0:C.surname1," ").concat(null===G||void 0===G||null===(R=G.holder)||void 0===R?void 0:R.surname2)})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(se,{label:w("LEGAL_NAME"),value:null===G||void 0===G||null===(T=G.holder)||void 0===T?void 0:T.name}),(0,g.jsx)(se,{label:w("PROXY"),value:"".concat(null===G||void 0===G?void 0:G.holder.proxyname,"(").concat(null===G||void 0===G||null===(A=G.holder)||void 0===A?void 0:A.proxynif,")")})]}),(0,g.jsx)(se,{label:w("ADDRESS"),value:"".concat(null===G||void 0===G||null===(f=G.holder)||void 0===f?void 0:f.address,", ").concat(null===G||void 0===G||null===(N=G.holder)||void 0===N?void 0:N.number," ").concat(null===G||void 0===G||null===(S=G.holder)||void 0===S?void 0:S.floor," ").concat(null===G||void 0===G||null===(y=G.holder)||void 0===y?void 0:y.door)}),(0,g.jsx)(se,{label:w("CITY"),value:"".concat(null===G||void 0===G||null===(L=G.holder)||void 0===L?void 0:L.city.name," (").concat(null===G||void 0===G||null===(P=G.holder)||void 0===P?void 0:P.postal_code,") ").concat(null===G||void 0===G||null===(D=G.holder)||void 0===D?void 0:D.state.name)})]}),(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(Q.Z,{variant:"middle",className:X.divider}),(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("CONTACT")}),(0,g.jsx)(se,{label:w("PHONE"),value:null===G||void 0===G||null===(U=G.holder)||void 0===U?void 0:U.phone1}),(0,g.jsx)(se,{label:w("EMAIL"),value:null===G||void 0===G||null===(H=G.holder)||void 0===H?void 0:H.email}),(0,g.jsx)(se,{label:w("LANGUAGE"),value:K.Mj[null===G||void 0===G||null===(F=G.holder)||void 0===F?void 0:F.language]})]}),(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(Q.Z,{variant:"middle",className:X.divider}),(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("SUMMARY_GROUP_TECHNICAL")}),(0,g.jsx)(se,{label:w("FARE"),value:w("FARE_SAME")}),(0,g.jsx)(se,{label:w("POWER"),value:w("POWER_SAME")}),(0,g.jsx)(j.Z,{className:X.withoutLabel,dangerouslySetInnerHTML:{__html:w("FARE_POWER_CHANGE_NOTE")}})]}),(0,g.jsxs)(z.Z,{item:!0,xs:12,sm:6,children:[(0,g.jsx)(Q.Z,{variant:"middle",className:X.divider}),(0,g.jsx)(I.Z,{className:X.sectionTitle,variant:"h6",children:w("SUMMARY_GROUP_PAYMENT")}),(0,g.jsx)(se,{label:w("IBAN"),value:null===G||void 0===G||null===(B=G.payment)||void 0===B?void 0:B.iban}),(0,g.jsx)(se,{label:w("VOLUNTARY_CENT"),value:null!==G&&void 0!==G&&null!==(Y=G.payment)&&void 0!==Y&&Y.voluntary_cent?w("YES"):w("NO")})]})]}),(0,g.jsx)(Q.Z,{variant:"middle",className:X.dividerBottom}),(0,g.jsx)(M.Z,{title:w("GENERAL_TERMS"),open:le,onAccept:function(){ne(!1),W("terms_accepted",!0)},onClose:function(){ne(!1),W("terms_accepted",!1)},children:(0,g.jsx)($.Z,{language:null===G||void 0===G||null===(k=G.holder)||void 0===k?void 0:k.language,documentName:"index"===(null===G||void 0===G||null===(q=G.supply_point)||void 0===q?void 0:q.tariff_type)?"general-and-indexed-specific-terms":"general-contract-terms"})}),(0,g.jsx)(m.Z,{mt:2,children:(0,g.jsx)(b.Z,{control:(0,g.jsx)(O.Z,{onClick:function(e){e.preventDefault(),ne(!0)},checked:G.terms_accepted,color:"primary"}),label:"index"===(null===G||void 0===G||null===(V=G.supply_point)||void 0===V?void 0:V.tariff_type)?w("INDEXED_ACCEPT_CONDITIONS"):w("PERIODS_ACCEPT_CONDITIONS")})})]})]})},ae=l(7084);var le=function(e){var a=(0,r.$)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z.Z,{title:a("BECOME_MEMBER_TITLE")}),(0,g.jsxs)(m.Z,{className:"step-body",children:[(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:a("HOLDER_MEMBER_IDENTIFIER_DESC")}}),(0,g.jsx)(m.Z,{mt:0,mb:1,children:(0,g.jsx)(ae.Z,(0,i.Z)({},e))})]})]})},ne=l(8545),se=l(7188),ie=JSON.parse('{"supply_point":{"verified":true,"cups":"ES0031101322018013GN0F","address":"Pedro L\xf3pez 13 BJO-E","status":"active"},"holder":{"vat":"58291270R","vatvalid":true,"vatexists":false,"name":"Perico","surname1":"Palote","surname2":"Romero","address":"Percebe 13","postal_code":"17003","state":{"id":1,"name":"Araba"},"city":{"id":7097,"name":"Alegr\xeda-Dulantzi"},"email":"perico@gmail.com","email2":"perico@gmail.com","phone1":"672555212","phone2":"555555555","language":"es_ES","isphisical":true},"payment":{"iban":"ES77 1234 1234 1612 3456 7890","sepa_accepted":true,"voluntary_cent":false},"member":{"is_member":false,"invite_token":false,"become_member":true},"privacy_policy_accepted":true,"terms_accepted":true}'),te=l(6697),oe=(0,p.Z)((function(e){return{root:{backgroundColor:"#f2f2f2",color:e.palette.text.primary},form:{position:"relative"},stepContainer:{marginTop:e.spacing(4),marginBottom:e.spacing(4),width:"100%",display:"flex",flexDirection:"column",backgroundColor:"transparent"},step:{position:"absolute",width:"100%"},actionsContainer:{display:"flex",justifyContent:"space-between"}}}));var re=function(e){var a=oe(),l=(0,r.$)(),p=l.t,j=l.i18n,Z=(0,_.UO)().language,N=(0,o.useState)(!1),O=(0,t.Z)(N,2),b=O[0],y=O[1],L=(0,o.useState)(0),P=(0,t.Z)(L,2),M=P[0],F=P[1],k=(0,o.useState)(!1),q=(0,t.Z)(k,2),V=q[0],X=q[1],w=(0,o.useState)(!1),Q=(0,t.Z)(w,2),z=Q[0],$=Q[1],J=(0,o.useState)(!1),ae=(0,t.Z)(J,2),re=ae[0],de=ae[1],ce=(0,o.useState)({}),ue=(0,t.Z)(ce,2),_e=ue[0],pe=ue[1],ve={SAMPLE_DATA:function(){var e=(0,i.Z)((0,i.Z)({},Te),ie);console.log(e)},SHOW_INSPECTOR:function(){y(!0)}},me=[u.Ry().shape({holder:u.Ry().shape({vat:u.Z_().required(p("FILL_NIF")),vatvalid:u.Xg().required(p("FILL_NIF")).oneOf([!0],p("FILL_NIF"))})}),u.Ry().shape({supply_point:u.Ry().shape({cups:u.Z_().required(p("CUPS_INVALID")).min(18,p("CUPS_INVALID")).test("statusError",p("CUPS_INVALID"),(function(){return!("error"===this.parent.status)})).test("statusBusy",p("CUPS_IN_PROCESS"),(function(){return!("busy"===this.parent.status)})).test("statusNew",p("CUPS_SHOULD_BE_ACTIVE"),(function(){return!("new"===this.parent.status)})).test("statusInactive",p("CUPS_SHOULD_BE_ACTIVE"),(function(){return!("inactive"===this.parent.status)})).test("statusInvalid",p("INVALID_SUPPLY_POINT_CUPS"),(function(){return!("invalid"===this.parent.status)})),verified:u.Xg().required(p("MARK_ADDRESS_CONFIRMATION_BOX")).oneOf([!0],p("MARK_ADDRESS_CONFIRMATION_BOX")),supply_point_accepted:u.Xg().required(p("CUPS_VERIFY_LABEL")).oneOf([!0],p("CUPS_VERIFY_LABEL"))})}),u.Ry().shape({holder:u.Ry().shape({name:u.Z_().required(p("NO_NAME")),surname1:u.Z_().when("isphisical",{is:!0,then:u.Z_().required(p("NO_SURNAME1"))}),proxyname:u.Z_().when("isphisical",{is:!1,then:u.Z_().required(p("NO_PROXY_NAME"))}),proxynif:u.Z_().when("isphisical",{is:!1,then:u.Z_().required(p("NO_PROXY_NIF"))}),proxynif_valid:u.Xg().when("isphisical",{is:!1,then:u.Xg().required(p("FILL_NIF")).oneOf([!0],p("FILL_NIF"))}),proxynif_phisical:u.Xg().when("isphisical",{is:!1,then:u.Xg().required(p("PROXY_NIF_PHISICAL")).oneOf([!0],p("PROXY_NIF_PHISICAL"))}),address:u.Z_().required(p("NO_ADDRESS")),number:u.Z_().required(p("NO_NUMBER")),postal_code:u.Z_().matches(/^\d*$/,p("NO_POSTALCODE")).required(p("NO_POSTALCODE")).min(5,p("NO_POSTALCODE")).max(5,p("NO_POSTALCODE")),state:u.Ry().shape({id:u.Rx().required(p("NO_STATE"))}),city:u.Ry().shape({id:u.Rx().required(p("NO_CITY"))}),email:u.Z_().required(p("NO_EMAIL")).email(p("NO_EMAIL")),email2:u.Z_().test("repeatEmail",p("NO_REPEATED_EMAIL"),(function(){return this.parent.email===this.parent.email2})),phone1:u.Z_().min(9,p("NO_PHONE")).required(p("NO_PHONE")),phone2:u.Z_().min(9,p("NO_PHONE")),language:u.Z_().required(p("NO_LANGUAGE"))}),legal_person_accepted:u.Xg().test({name:"isTheMemberVat",message:p("ACCEPT_LEGAL_PERSON"),test:function(){return!(!1===this.parent.holder.isphisical&&!0!==this.parent.legal_person_accepted)}}),privacy_policy_accepted:u.Xg().required(p("UNACCEPTED_PRIVACY_POLICY")).oneOf([!0],p("UNACCEPTED_PRIVACY_POLICY"))}),u.Ry().shape({member:u.Ry().shape({become_member:u.Xg().required(p("UNACCEPTED_PRIVACY_POLICY")).oneOf([!0,!1],p("UNACCEPTED_PRIVACY_POLICY"))})}),u.Ry().shape({member:u.Ry().shape({checked:u.Xg().required(p("UNACCEPTED_PRIVACY_POLICY")).oneOf([!0],p("UNACCEPTED_PRIVACY_POLICY"))})}),u.Ry().shape({payment:u.Ry().shape({voluntary_cent:u.Xg().required(p("NO_VOLUNTARY_DONATION_CHOICE_TAKEN")).oneOf([!1,!0],p("NO_VOLUNTARY_DONATION_CHOICE_TAKEN"))})}),u.Ry().shape({especial_cases:u.Ry().shape({attachments:u.Ry().when("reason_death",{is:!0,then:u.Ry().shape({death:u.IX().min(1,p("ELECTRODEP_ATTACH_REQUIRED")).max(1,p("ELECTRODEP_ATTACH_REQUIRED")).required(p("ELECTRODEP_ATTACH_REQUIRED"))})}).when("reason_electrodep",{is:!0,then:u.Ry().shape({medical:u.IX().min(1,p("ELECTRODEP_ATTACH_REQUIRED")).max(1,p("ELECTRODEP_ATTACH_REQUIRED")).required(p("ELECTRODEP_ATTACH_REQUIRED")),resident:u.IX().min(1,p("ELECTRODEP_ATTACH_REQUIRED")).max(1,p("ELECTRODEP_ATTACH_REQUIRED")).required(p("ELECTRODEP_ATTACH_REQUIRED"))})}).when("reason_merge",{is:!0,then:u.Ry().shape({merge:u.IX().min(1,p("ELECTRODEP_ATTACH_REQUIRED")).max(1,p("ELECTRODEP_ATTACH_REQUIRED")).required(p("ELECTRODEP_ATTACH_REQUIRED"))})})})}),u.Ry().shape({payment:u.Ry().shape({iban:u.Z_().required(p("IBAN_ERROR")),iban_valid:u.Xg().required(p("IBAN_ERROR")).oneOf([!0],p("IBAN_ERROR")),sepa_accepted:u.Xg().required(p("IBAN_ERROR")).oneOf([!0],p("IBAN_ERROR"))})}),u.Ry().shape({terms_accepted:u.Xg().required(p("UNACCEPTED_TERMS")).oneOf([!0],p("UNACCEPTED_TERMS"))})],he=function(e){var a=p("DATA_PROTECTION_HOLDERCHANGE_URL");return(0,g.jsxs)(g.Fragment,{children:[0===M&&(0,g.jsx)(S,(0,i.Z)({},e)),1===M&&(0,g.jsx)(U,(0,i.Z)({},e)),2===M&&(0,g.jsx)(H.Z,(0,i.Z)({url:a},e)),3===M&&(0,g.jsx)(B,(0,i.Z)({},e)),4===M&&(0,g.jsx)(le,(0,i.Z)({},e)),5===M&&(0,g.jsx)(Y.Z,(0,i.Z)({},e)),6===M&&(0,g.jsx)(G,(0,i.Z)({},e)),7===M&&(0,g.jsx)(W.Z,(0,i.Z)({},e)),8===M&&(0,g.jsx)(ee,(0,i.Z)({},e))]})};function Ee(e,a){var l,n,s,i;switch(e){case 3:return!(null===a||void 0===a||null===(l=a.holder)||void 0===l||!l.ismember)||!!(0,K.xB)(null===a||void 0===a||null===(n=a.holder)||void 0===n?void 0:n.vat);case 4:return!(null===a||void 0===a||null===(s=a.holder)||void 0===s||!s.ismember)||!0===(null===a||void 0===a||null===(i=a.member)||void 0===i?void 0:i.become_member)}return!1}(0,o.useEffect)((function(){j.changeLanguage(Z)}),[Z,j]);var xe=M>=8,Ce=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(a){var l,s,i,t,o,r,d,c,u,_,p,v,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=(null===a||void 0===a||null===(l=a.response)||void 0===l||null===(s=l.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.code)||"UNEXPECTED",_=(null===a||void 0===a||null===(t=a.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.data)||{},null!==a&&void 0!==a&&null!==(r=a.response)&&void 0!==r&&null!==(d=r.data)&&void 0!==d&&null!==(c=d.data)&&void 0!==c&&c.invalid_fields&&(u=Object.keys(null===a||void 0===a||null===(p=a.response)||void 0===p||null===(v=p.data)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.invalid_fields[0])[0].toUpperCase()+"_"+u),_.code=u,console.error(_),de(_),$(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Re=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(a){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),l=(0,K.nZ)(a),e.next=4,(0,D.ef)(l).then((function(e){var a=null!==e&&void 0!==e&&e.data?e.data:{};pe(a),de(!1),$(!0)})).catch((function(e){console.error(null===e||void 0===e?void 0:e.response),Ce(e)}));case 4:F(9),X(!1);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Te={holder:{vat:"",vatvalid:!1,isphisical:!0,proxynif_valid:!1,proxynif_phisical:!0,state:{id:""},city:{id:""},proxynif:"",proxyname:"",name:"",address:"",number:"",floor:"",door:"",postal_code:"",surname1:"",surname2:"",email:"",email2:"",phone1:"",phone2:"",language:"".concat(j.language,"_ES")},supply_point:{cups:"",status:!1,address:"",verified:!1,supply_point_accepted:!1,tariff_type:""},member:{become_member:"",invite_token:!1,checked:!1},payment:{iban:"",sepa_accepted:!1,voluntary_cent:""},especial_cases:{reason_default:!0,reason_death:!1,reason_merge:!1,reason_electrodep:!1,attachments:{}},privacy_policy_accepted:!1,terms_accepted:!1,legal_person_accepted:!1};return(0,g.jsx)(d.GlobalHotKeys,{handlers:ve,keyMap:{SHOW_INSPECTOR:"ctrl+alt+shift+d"},children:(0,g.jsx)(m.Z,{className:a.root,children:(0,g.jsx)(E.Z,{maxWidth:"md",children:(0,g.jsx)(c.J9,{enableReinitialize:!0,initialValues:Te,validationSchema:me[M],validateOnMount:!0,onSubmit:function(e,a){xe?Re(e):function(e,a){for(var l=M+1;Ee(l,e,!1);)l++;F(Math.min(l,9)),a.setTouched({}),a.setSubmitting(!1)}(e,a)},children:function(e){var l,n;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"ov-theme",children:(0,g.jsx)(c.l0,{className:a.form,noValidate:!0,autoComplete:"off",children:(0,g.jsxs)(C.Z,{elevation:0,className:a.stepContainer,children:[(0,g.jsx)(x.Z,{variant:V?"indeterminate":"determinate",value:M/9*100}),(0,g.jsx)(g.Fragment,{children:z?(0,g.jsx)(m.Z,{className:"step-body",children:re?(0,g.jsx)(se.default,{error:re}):(0,g.jsx)(ne.default,{result:_e})}):he(e)}),(0,g.jsx)(m.Z,{mx:0,mt:2,mb:3,children:(0,g.jsxs)("div",{className:a.actionsContainer,children:[void 0===(null===_e||void 0===_e?void 0:_e.contract_number)&&(0,g.jsx)(v.Z,{"data-cy":"prev",className:a.button,startIcon:(0,g.jsx)(T.Z,{}),disabled:0===M||V,onClick:function(){return function(e,a){for(var l=M-1;Ee(l,e,!0);)l--;F(Math.max(0,l)),a.setTouched({}),a.setSubmitting(!1),z&&($(!1),de(!1))}(e.values,e)},children:p("PAS_ANTERIOR")}),!z&&(0,g.jsx)(v.Z,{type:"submit","data-cy":"next",className:a.button,variant:"contained",color:"primary",startIcon:xe&&(V?(0,g.jsx)(h.Z,{size:24}):(0,g.jsx)(A.Z,{})),endIcon:!xe&&(0,g.jsx)(R.Z,{}),disabled:V||!e.isValid,children:p(xe?"SEND":"SEGUENT_PAS")})]})}),(0,g.jsx)(m.Z,{mx:0,mt:2,mb:3,children:(0,g.jsx)("div",{className:a.actionsContainer,children:4===M&&(0,K.xB)(null===(l=e.values)||void 0===l||null===(n=l.holder)||void 0===n?void 0:n.vat)&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(m.Z,{mt:3,children:(0,g.jsx)(f.Z,{severity:"warning",children:(0,g.jsx)(I.Z,{variant:"body1",dangerouslySetInnerHTML:{__html:p("CIF_COMMUNITY_OWNERS")}})})})})})})]})})}),b&&(0,g.jsx)(te.Z,(0,i.Z)({},e))]})}})})})})}}}]);
//# sourceMappingURL=802.c7d7b759.chunk.js.map