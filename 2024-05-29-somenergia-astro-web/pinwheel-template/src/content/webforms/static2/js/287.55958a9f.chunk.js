"use strict";(self.webpackChunkwebforms_ui=self.webpackChunkwebforms_ui||[]).push([[287],{6697:function(e,n,t){t(2791);var i=t(9526),r=t(184);n.Z=function(e){return(0,r.jsx)(i.Z,{elevation:3,style:{margin:"1rem 0"},children:(0,r.jsxs)("pre",{style:{background:"#fff",fontSize:"1rem",padding:"1.5rem"},children:[(0,r.jsx)("strong",{children:"props"})," ="," ",JSON.stringify(e,null,2)]})})}},4345:function(e,n,t){t.d(n,{Z:function(){return h}});var i=t(1413),r=t(2791),a=t(8596),o=t(9439),l=t(4569),c=t.n(l),s=t(1422),d=t(3168),u=t(184),m=function(e){var n=(0,d.$)().i18n,t=e.documentName,i=e.language,a=void 0===i?"".concat(n.language,"_ES"):i,l=r.useState(),m=(0,o.Z)(l,2),p=m[0],f=m[1];return r.useEffect((function(){var e="".concat("/static/webforms","/static/docs/").concat(a.slice(0,2),"/").concat(t,".html");f(void 0),c()({method:"GET",url:e}).then((function(e){f(null===e||void 0===e?void 0:e.data)})).catch((function(n){console.log("Error retrieving text ".concat(e))}))}),[t,a]),void 0===p?(0,u.jsx)(s.Z,{}):(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:p}})},p=m,f=(0,a.Z)((function(e){return{container:{"& a":{color:e.palette.text.secondary},"& h2":{fontSize:"1.25rem"},"& .pujar a":{fontSize:"1rem"},"& .sagnia":{paddingLeft:"1rem"}}}})),h=function(e){var n=f();return(0,u.jsx)("span",{className:n.container,children:(0,u.jsx)(p,(0,i.Z)({},e))})}},3460:function(e,n,t){t(2791);var i=t(8596),r=t(184);n.Z=function(e){e.variant;var n=e.children,t=e.className,i=a();return(0,r.jsx)("div",{className:"".concat(i.card," ").concat(t||""),children:n})};var a=(0,i.Z)((function(e){return{card:{width:"100%",background:"#fff",color:"#4d4d4d",fontSize:"14px",padding:"1.25rem 1.25rem",margin:"0 0 .5em 0",p:{lineHeight:"1.5"},"& p:first-child":{marginTop:0},"& p:last-child":{marginBottom:0},"& li":{marginBottom:"0.5rem",lineHeight:"1.5"}}}}))},4301:function(e,n,t){t(2791);var i=t(8596),r=t(184);n.Z=function(e){e.variant;var n=e.children,t=a();return(0,r.jsx)("h3",{className:t.header,children:n})};var a=(0,i.Z)((function(e){return{header:{width:"100%",background:"#fff",color:"#96b633",padding:"1rem 1.5rem",margin:"0 0 .5em 0",fontSize:"18px",textTransform:"uppercase"}}}))},7633:function(e,n,t){t(2791);var i=t(8596),r=t(184);n.Z=function(e){var n=e.label,t=void 0===n?"":n,i=e.children,o=e.isHighlight,l=a();return(0,r.jsxs)("div",{className:l.row,children:[(0,r.jsx)("div",{className:o?l.highlight:l.label,children:t}),(0,r.jsx)("div",{className:l.field,children:i})]})};var a=(0,i.Z)((function(e){return{row:{width:"100%",display:"flex"},label:{background:"#cccc",borderRight:"5px #f2f2f2 solid",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 25%",maxWidth:"25%",display:"flex",alignItems:"center"},highlight:{background:"#cccc",borderRight:"5px #f2f2f2 solid",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 25%",maxWidth:"25%",display:"flex",alignItems:"center",fontWeight:"bold",color:e.palette.primary.main},field:{background:"#fff",fontSize:"14px",padding:"1em",margin:"0 0 .5em 0",flex:"0 0 75%",maxWidth:"75%","& p":{margin:0}}}}))},9287:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var i=t(1413),r=t(9439),a=t(2791),o=t(3168),l=t(7325),c=t(5173),s=t(2797),d=t(7689),u=t(8596),m=t(2130),p=t(6513),f=t(4265),h=t(5720),v=t(3712),x=t(9526),g=t(8302),_=t(2124),C=t(3925),Z=t(7892),E=t.n(Z),N=(t(3195),t(2563),t(6697)),T=t(9329),j=t(6716),S=t(2439),A=t(84),I=t(8961),L=t(4301),b=t(3460),y=t(184),O=function(){var e=M(),n=(0,o.$)().t;return(0,y.jsxs)("div",{className:e.root,children:[(0,y.jsx)(L.Z,{children:n("CANCELLATION_INTRO_TITLE")}),(0,y.jsx)(b.Z,{children:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:n("CANCELLATION_INTRO_BODY",{url_new:n("FAQ_ALTA_SUMINISTRAMENT_URL"),url_holderchange:n("FAQ_HOLDERCHANGE_URL")})}})})]})},M=(0,u.Z)((function(e){return{root:{position:"relative",color:e.palette.text.primary}}})),R=t(5247),D=t(4135),P=t(9626),H=t(6782),k=t(7025),Y=t(4279),w=t(8052),U=t(2790),z=t(9650),F=t(7633),V=t(442),B=t(4345),W=t(1422),$=t(1070),q=t(9299),G=function(e){var n=e.values,t=e.setFieldValue,i=e.handleChange,l=e.handleBlur,c=e.errors,s=e.touched,d=X(),u=(0,o.$)().t,m=(0,a.useState)(!1),p=(0,r.Z)(m,2),f=p[0],h=p[1],v=(0,a.useState)(!1),x=(0,r.Z)(v,2),g=x[0],_=x[1],C=(0,a.useState)([]),Z=(0,r.Z)(C,2),N=Z[0],T=Z[1],j=(0,a.useState)(null),S=(0,r.Z)(j,2),A=S[0],I=S[1],O=(0,a.useState)(null),M=(0,r.Z)(O,2),G=M[0],J=M[1];(0,a.useEffect)((function(){_(!0);var e=E()();(0,q.b_)(e,e.add(30,"days")).then((function(n){var t=n.data,i=(0,$.M7)(e,14,t);T(i),_(!1)})).catch((function(e){var n,t,i,r;!(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t||!t.state)&&(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(r=i.data)||void 0===r||r.state);T([]),_(!1)}))}),[]),(0,a.useEffect)((function(){N!==[]?(I(N[0]),J(N[N.length-1]),t("date_action",E()(N[0]).format("DD/MM/YYYY"))):(I(null),J(null))}),[N]);return g?(0,y.jsx)(W.Z,{}):(0,y.jsxs)("div",{className:d.root,children:[(0,y.jsx)(L.Z,{children:u("CANCELLATION_DETAILS_TITLE")}),(0,y.jsx)(F.Z,{label:u("CUPS"),children:(0,y.jsx)(P.Z,{id:"cups",name:"cups",fullWidth:!0,variant:"outlined",size:"small",onChange:i,onBlur:l,InputProps:{endAdornment:(0,y.jsx)(Y.Z,{position:"end",children:n.contract_cups===n.cups&&(0,y.jsx)(z.Z,{color:"primary"})})},error:(null===c||void 0===c?void 0:c.cups)&&(null===s||void 0===s?void 0:s.cups),helperText:(null===s||void 0===s?void 0:s.cups)&&(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:null===c||void 0===c?void 0:c.cups}})})}),(0,y.jsxs)(F.Z,{label:u("CANCELLATION_DATE"),children:[(0,y.jsx)(w.M,{name:"date_action",fullWidth:!0,className:d.icon,inputVariant:"outlined",variant:"inline",autoOk:!0,disableToolbar:!0,minDate:A,maxDate:G,size:"small",format:"DD/MM/YYYY",value:E()(n.date_action,"DD/MM/YYYY"),onChange:function(e){t("date_action",e.format("DD/MM/YYYY"))},shouldDisableDate:function(e){if(!N)return!0;var n=e.format("YYYY-MM-DD");return!N.includes(n)},InputProps:{startAdornment:(0,y.jsx)(k.Z,{edge:"start",size:"small",children:(0,y.jsx)(U.Z,{})})}}),(0,y.jsx)(H.Z,{component:"span",className:d.helper,dangerouslySetInnerHTML:{__html:u("CANCELLATION_DATE_HELPER")}})]}),(0,y.jsx)(F.Z,{label:u("PHONE"),children:(0,y.jsx)(P.Z,{id:"phone",name:"phone",fullWidth:!0,variant:"outlined",size:"small",value:n.phone,onChange:i,onBlur:l,error:(null===c||void 0===c?void 0:c.phone)&&(null===s||void 0===s?void 0:s.phone),helperText:(null===c||void 0===c?void 0:c.phone)&&(null===s||void 0===s?void 0:s.phone)&&(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:null===c||void 0===c?void 0:c.phone}})||(0,y.jsx)(H.Z,{component:"span",className:d.helper,dangerouslySetInnerHTML:{__html:u("CANCELLATION_PHONE_HELPER")}})})}),(0,y.jsxs)(b.Z,{className:d.legalChecks,children:[(0,y.jsx)(V.Z,{title:u("CANCELLATION_TERMS_TITLE"),open:f,onAccept:function(){h(!1),t("terms_accepted",!0)},onClose:function(){h(!1),t("terms_accepted",!1)},children:(0,y.jsx)(B.Z,{documentName:"cancellation-terms"})}),(0,y.jsx)(D.Z,{control:(0,y.jsx)(R.Z,{name:"privacy_policy",checked:n.privacy_policy,onClick:function(){t("privacy_policy",!(null!==n&&void 0!==n&&n.privacy_policy))},color:"primary"}),label:(0,y.jsx)("label",{dangerouslySetInnerHTML:{__html:u("ACCEPT_PRIVACY_POLICY",{url:u("ACCEPT_PRIVACY_POLICY_URL")})}})}),(0,y.jsx)(D.Z,{control:(0,y.jsx)(R.Z,{name:"terms_accepted",checked:n.terms_accepted,onClick:function(e){e.preventDefault(),h(!0)},color:"primary"}),label:u("CANCELLATION_TERMS")})]})]})},X=(0,u.Z)((function(e){return{root:{width:"100%",marginBottom:"0.5rem",'#root & input[type="text"]':{fontSize:"14px !important",padding:"14px !important"}},helper:{paddingTop:"4px",marginBottom:"-0.25rem !important"},legalChecks:{marginTop:"4px",display:"flex",flexDirection:"column",padding:"0.75rem 1.5rem","& .MuiFormControlLabel-label":{fontSize:"14px !important"}},icon:{"& path":{color:"rgba(0, 0, 0, 0.54)"}}}})),J=t(7188),K=t(8545),Q={SAMPLE_DATA:"ctrl+shift+1",SHOW_INSPECTOR:"ctrl+shift+d"},ee=function(e){var n=ne(),t=(0,o.$)(),u=t.t,Z=t.i18n,L=e.contract,b=(0,d.UO)().language,M=(0,a.useState)(!1),R=(0,r.Z)(M,2),D=R[0],P=R[1],H=(0,a.useState)(0),k=(0,r.Z)(H,2),Y=k[0],w=k[1],U=(0,a.useState)(!1),z=(0,r.Z)(U,2),F=z[0],V=z[1],B=(0,a.useState)(!1),W=(0,r.Z)(B,2),$=W[0],X=W[1],ee=(0,a.useState)(!1),te=(0,r.Z)(ee,2),ie=te[0],re=te[1],ae=(0,a.useState)(),oe=(0,r.Z)(ae,2),le=oe[0],ce=oe[1],se={SHOW_INSPECTOR:function(){P(!D)}},de={contract_id:L.id,contract_number:L.number,contract_cups:L.cups,cups_address:L.address,cups:"",privacy_policy:!1,terms_accepted:!1,phone:"",validation_cups:"",date_action:null};(0,a.useEffect)((function(){b&&Z.changeLanguage(b),b?E().locale(b):E().locale("es")}),[b,Z]);var ue=[s.Ry().shape({}),s.Ry().shape({cups:s.Z_().required(u("CUPS_INVALID")).min(18,u("CUPS_INVALID")).test("sameCups",u("NOT_MATCH"),(function(){return!(this.parent.contract_cups!==this.parent.cups)})),phone:s.Z_().required(u("NO_PHONE")).min(9,u("NO_PHONE")).max(9,u("NO_PHONE")),privacy_policy:s.Xg().required(u("UNACCEPTED_TERMS")).oneOf([!0],u("UNACCEPTED_TERMS")),terms_accepted:s.Xg().required(u("UNACCEPTED_TERMS")).oneOf([!0],u("UNACCEPTED_TERMS"))})];return L.id&&L.number&&L.cups?(0,y.jsx)(l.GlobalHotKeys,{handlers:se,keyMap:Q,children:(0,y.jsx)(_.M,{utils:C.Z,children:(0,y.jsx)(c.J9,{onSubmit:function(){},enableReinitialize:!0,initialValues:de,validationSchema:ue[Y],validateOnMount:!0,children:function(e){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.l0,{id:"cancelForm",method:"POST",className:n.root,noValidate:!0,autoComplete:"off",children:(0,y.jsxs)(v.Z,{maxWidth:"lg",disableGutters:!0,children:[!$&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(A.Z,(0,i.Z)({},e.values)),0===Y&&(0,y.jsx)(O,(0,i.Z)({},e)),1===Y&&(0,y.jsx)(G,(0,i.Z)({},e)),(0,y.jsx)(I.Z,{}),(0,y.jsx)(f.Z,{mx:0,mt:2,mb:3,children:(0,y.jsxs)("div",{className:n.actionsContainer,children:[void 0===(null===le||void 0===le?void 0:le.contract_number)&&(0,y.jsx)(p.Z,{"data-cy":"prev",className:n.button,startIcon:(0,y.jsx)(j.Z,{}),disabled:0===Y||F,onClick:function(){return function(e){var n=Y-1;w(Math.max(0,n)),$&&(X(!1),re(!1)),e.submitForm().then((function(){e.validateForm(),e.setTouched({})}))}(e)},children:u("PAS_ANTERIOR")}),Y<1?(0,y.jsx)(p.Z,{type:"button","data-cy":"next",className:n.button,variant:"contained",color:"primary",endIcon:(0,y.jsx)(T.Z,{}),disabled:!e.isValid,onClick:function(){return function(e){var n=Y+1;e.submitForm().then((function(){e.isValid&&(w(Math.min(n,2)),e.validateForm(),e.setTouched({}))}))}(e)},children:u("SEGUENT_PAS")}):!$&&(0,y.jsx)(p.Z,{type:"button","data-cy":"submit",className:n.button,variant:"contained",color:"primary",startIcon:F?(0,y.jsx)(h.Z,{size:24}):(0,y.jsx)(S.Z,{}),disabled:F||!e.isValid,onClick:function(){return function(e){V(!0);var n=document.querySelector("input[name='csrfmiddlewaretoken']");console.log("csrfmiddlewaretoken: ".concat(null===n||void 0===n?void 0:n.value));var t=(0,i.Z)((0,i.Z)({},e),{},{csrfToken:null===n||void 0===n?void 0:n.value});(0,q.h2)(t).then((function(e){V(!1),X(!0),ce(e)})).catch((function(e){var n,t,i,r;V(!1),X(!0),console.error(e);var a=null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.error?null===e||void 0===e||null===(i=e.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.error:{code:"UNEXPECTED"};re(a)}))}(e.values)},children:u("TRAMITAR_BAJA")})]})})]}),$&&(0,y.jsx)(x.Z,{elevation:0,className:n.stepContainer,children:le?(0,y.jsx)(K.default,{showHeader:!1,title:u("CANCELLATION_SUCCESS_TITLE"),description:u("CANCELLATION_SUCCESS_DESC")}):(0,y.jsx)(J.default,{error:ie,showHeader:!1})})]})}),D&&(0,y.jsx)(N.Z,(0,i.Z)({},e))]})}})})}):(0,y.jsx)(m.Z,{severity:"error",children:(0,y.jsx)(g.Z,{className:n.disclaimer,variant:"body1",dangerouslySetInnerHTML:{__html:u("CANCELLATION_NO_AVAILABLE")}})})},ne=(0,u.Z)((function(e){return{root:{backgroundColor:"#f2f2f2",color:e.palette.text.primary,display:"flex",paddingBottom:"2rem"},stepContainer:{padding:"4rem",marginTop:0,marginBottom:e.spacing(4),width:"100%",display:"flex",flexDirection:"column",backgroundColor:e.palette.backgroundColor},step:{position:"absolute",width:"100%"},actionsContainer:{display:"flex",justifyContent:"space-between",paddingTop:"0.25rem"},disclaimer:{fontSize:"14px",fontWeight:400}}}))},8961:function(e,n,t){t(2791);var i=t(3168),r=t(8596),a=t(4265),o=t(2130),l=t(8302),c=t(184);n.Z=function(){var e=s(),n=(0,i.$)().t;return(0,c.jsx)(a.Z,{mt:.75,mb:1.5,children:(0,c.jsx)(o.Z,{severity:"warning",children:(0,c.jsx)(l.Z,{className:e.disclaimer,variant:"body1",dangerouslySetInnerHTML:{__html:n("CANCELLATION_DISCLAIMER")}})})})};var s=(0,r.Z)((function(e){return{disclaimer:{fontSize:"120%",fontWeight:400,fontVariant:"small-caps"}}}))},84:function(e,n,t){t(2791);var i=t(3168),r=t(8596),a=t(7633),o=t(184);n.Z=function(e){var n=(0,i.$)().t,t=l(),r=e.contract_number,c=e.cups_address;return(0,o.jsxs)("div",{className:t.root,children:[(0,o.jsx)(a.Z,{label:n("CONTRACT"),children:(0,o.jsx)("p",{children:r})}),(0,o.jsx)(a.Z,{label:n("ADDRESS"),children:(0,o.jsx)("p",{children:c})})]})};var l=(0,r.Z)((function(e){return{root:{width:"100%",marginBottom:"0.5rem"}}}))},7188:function(e,n,t){t.r(n);var i=t(2791),r=t(3168),a=t(7689),o=t(8596),l=t(272),c=t(4265),s=t(8302),d=t(14),u=t(293),m=t(4884),p=t(184),f=(0,o.Z)((function(e){return{container:{paddingTop:0,display:"flex",flexDirection:"column",alignItems:"center"},message:{marginTop:e.spacing(2),fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",textAlign:"center",color:"#6f6262","& a":{color:"#fe6444 !important"}},logo:{width:"220px",margin:e.spacing(2)},title:{textAlign:"center",fontSize:"1.15rem"},error:{width:e.spacing(6),height:e.spacing(6),color:"#fe6444",backgroundColor:"transparent",border:"2px solid #fe6444",marginBottom:e.spacing(3)}}}));n.default=function(e){var n,t,o,h,v,x,g,_,C=(0,a.UO)().language,Z=(0,r.$)(),E=Z.t,N=Z.i18n,T=f(),j=e.error,S=void 0!==j&&j,A=e.description,I=void 0===A?"NEWMEMBER_KO_DESCRIPTION":A,L=e.showHeader,b=void 0===L||L;return(0,i.useEffect)((function(){N.changeLanguage(C)}),[C,N]),(0,p.jsxs)(p.Fragment,{children:[b&&(0,p.jsx)(u.Z,{title:E("FAILURE_TITLE")}),(0,p.jsxs)("div",{className:T.container,children:[(0,p.jsx)(l.Z,{className:T.error,children:(0,p.jsx)(d.Z,{fontSize:"large"})}),(0,p.jsx)(s.Z,{className:T.title,variant:"h6",children:E("FAILURE_TEXT")}),(0,p.jsx)(s.Z,{className:T.message,variant:"body1",dangerouslySetInnerHTML:{__html:void 0===(null===S||void 0===S?void 0:S.code)?E(I,{url:E("CONTACT_HELP_URL")}):"INVALID_FIELD"===(null===S||void 0===S?void 0:S.code)&&null!==S&&void 0!==S&&null!==(n=S.data)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.field?N.exists(null===S||void 0===S||null===(o=S.data)||void 0===o||null===(h=o[0])||void 0===h?void 0:h.field.toUpperCase())?E(null===S||void 0===S||null===(v=S.data)||void 0===v||null===(x=v[0])||void 0===x?void 0:x.field.toUpperCase()):E("INVALID_FIELD",{field_name:null===S||void 0===S||null===(g=S.data)||void 0===g||null===(_=g[0])||void 0===_?void 0:_.field}):"INVOICE_ERROR"===(null===S||void 0===S?void 0:S.code)?null===S||void 0===S?void 0:S.error:E("UNEXPECTED_POSTERROR",{error_message:null!==S&&void 0!==S&&S.code?E(null===S||void 0===S?void 0:S.code):null===S||void 0===S?void 0:S.error})}}),(0,p.jsx)(c.Z,{mt:3,mb:1,children:(0,p.jsx)("img",{className:T.logo,alt:"Cuca KO de Som Energia",src:m.Z})})]})]})}}}]);
//# sourceMappingURL=287.55958a9f.chunk.js.map