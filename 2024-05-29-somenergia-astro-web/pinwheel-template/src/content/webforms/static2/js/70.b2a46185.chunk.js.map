{"version":3,"file":"static/js/70.b2a46185.chunk.js","mappings":"4oBAGaA,EAA8B,IAE9BC,EAAe,OACfC,EAA+B,SAK/BC,EAA4B,IAE5BC,EAAY,CACvBC,MAAO,aACPC,MAAO,aAGIC,EAAqB,CAChCC,uBAAuB,EACvBC,wBAAwB,EACxBC,wBAAwB,GACxBC,gBAAiB,IACjBC,gBAAiB,IACjBC,iBAAkB,IAClBC,wBAAyB,KAGrBC,EAAe,SAACC,GAQpB,OAPAC,OAAOC,KAAKF,GAAMG,SAChB,SAACC,GAAD,OACgB,MAAbJ,EAAKI,IACU,KAAdJ,EAAKI,IACJC,MAAMC,QAAQN,EAAKI,MAAUJ,EAAKI,GAAKG,gBACnCP,EAAKI,EAJd,IAMKJ,CACR,EAEKQ,EAA4B,SAACC,GACjC,IAAQC,EAAoBD,EAApBC,OAAQC,EAAYF,EAAZE,QAiChB,MA/Ba,CACXC,MAAK,OAAEF,QAAF,IAAEA,OAAF,EAAEA,EAAQG,OACfC,YAAY,GAAD,sBAAMJ,QAAN,IAAMA,OAAN,EAAMA,EAAQI,cAAd,cAA8BJ,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAQK,oBACjDC,SAAgB,OAANN,QAAM,IAANA,GAAAA,EAAQO,YACdC,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQU,OAAQpC,QAC3BqC,EACJC,SAAgB,OAANZ,QAAM,IAANA,GAAAA,EAAQO,YACdC,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQa,QAASvC,QAC5BqC,EACJG,SACQ,OAANd,QAAM,IAANA,GAAAA,EAAQO,aAAR,OAAuBP,QAAvB,IAAuBA,GAAAA,EAAQe,aAC3BP,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQgB,QAAS1C,QAC5BqC,EACNM,SACQ,OAANjB,QAAM,IAANA,GAAAA,EAAQO,aAAR,OAAuBP,QAAvB,IAAuBA,GAAAA,EAAQe,aAC3BP,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQkB,QAAS5C,QAC5BqC,EACNQ,SACQ,OAANnB,QAAM,IAANA,GAAAA,EAAQO,aAAR,OAAuBP,QAAvB,IAAuBA,GAAAA,EAAQe,aAC3BP,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQoB,QAAS9C,QAC5BqC,EACNU,SACQ,OAANrB,QAAM,IAANA,GAAAA,EAAQO,aAAR,OAAuBP,QAAvB,IAAuBA,GAAAA,EAAQe,aAC3BP,KAAKC,OAAY,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQsB,QAAShD,QAC5BqC,EACNY,OAAc,OAANvB,QAAM,IAANA,GAAAA,EAAQO,YAAR,OAAsBP,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAQuB,YAASZ,EAC/Ca,aAAY,OAAEvB,QAAF,IAAEA,OAAF,EAAEA,EAASwB,YACvBC,gBAAe,OAAEzB,QAAF,IAAEA,OAAF,EAAEA,EAAS0B,eAC1BC,cAAa,OAAE3B,QAAF,IAAEA,OAAF,EAAEA,EAAS4B,MAI3B,EAEYC,EAAsB,SAAC/B,GAClC,IAAMT,GAAI,UAAQQ,EAA0BC,IAC5C,OAAOV,EAAaC,EACrB,EAEYyC,EAA8B,SAACC,GAC1C,IAAIC,EAAuB,KAC3B,OAAID,QAAJ,IAAIA,GAAAA,EAAQhC,SACViC,EAAuB5C,EAAaS,EAA0BkC,KAGhE,IAAM1C,EAAO,CACX4C,QAAO,OAAEF,QAAF,IAAEA,OAAF,EAAEA,EAAQG,SACjB/B,YAAW,OAAE4B,QAAF,IAAEA,OAAF,EAAEA,EAAQI,cACrBC,cAAa,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAQM,aACvBC,sBAA6B,OAANP,QAAM,IAANA,GAAAA,EAAQhC,OAASiC,EAAuB,MAGjE,OAAO5C,EAAaC,EACrB,EAEYkD,EAAmB,SAACC,GAC/B,QAAY9B,IAAR8B,EAAJ,CACA,IAAIC,EAAYD,EAAI,GACpB,OAAkD,IAA3C,mBAAmBE,QAAQD,EAFX,CAGxB,EAEYE,EAAwB,SAACC,GAAc,IAAD,8DAmCK,EAiChB,wBA8Ba,EAjG7CC,EAAiBC,KAAKC,MAAMD,KAAKE,UAAUJ,UAEFlC,KAA7B,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBI,oBAAhB,eAA8BC,kBACzBL,EAAeI,aAAaC,cAGuBxC,KAA1C,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBI,oBAAhB,eAA8BE,+BACzBN,EAAeI,aAAaE,2BAGQzC,KAA3B,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBI,oBAAhB,eAA8BG,gBACzBP,EAAeI,aAAaG,YAGU1C,KAA7B,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,mBAAwBC,gBAAxB,eAAkCC,QACpCV,EAAeQ,OAAOC,SAAWT,EAAeQ,OAAOC,SAASC,WAGxB7C,KAAxB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,mBAAwBG,aAAxB,eAA+BC,MACjCZ,EAAeQ,OAAOG,MAAQE,SAASb,EAAeQ,OAAOG,MAAMC,UAG5B/C,KAAvB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,mBAAwBM,YAAxB,eAA8BF,MAChCZ,EAAeQ,OAAOM,KAAOD,SAASb,EAAeQ,OAAOM,KAAKF,UAGzB/C,KAAxB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBO,mBACnBf,EAAeQ,OAAOO,eAGUlD,KAAvB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBQ,kBACnBhB,EAAeQ,OAAOQ,cAGYnD,KAAzB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBS,gBACiB,KAAzB,OAAdjB,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBS,oBACnBjB,EAAeQ,OAAOU,gBACtBlB,EAAeQ,OAAOW,mBAEtBnB,EAAeQ,OAAOY,gBACtBpB,EAAeQ,OAAOa,iBAExBrB,EAAeQ,OAAOS,kBACtBjB,EAAeQ,OAAOc,oBAG/BtB,EAAeQ,OAAOe,QACpB,oBAAGvB,EAAeQ,cAAlB,aAAG,EAAuBe,QAA1B,uBAAsCvB,EAAeQ,cAArD,aAAsC,EAAuBgB,OAA7D,sBAAuExB,EAAeQ,cAAtF,aAAuE,EAAuBiB,MAA9F,sBAAuGzB,EAAeQ,cAAtH,aAAuG,EAAuBkB,MAAOC,YAErG9D,KAAlC,UAAAmC,EAAeQ,cAAf,eAAuBgB,UAAvB,UACSxB,EAAeQ,cADxB,cACS,EAAuBgB,aAEC3D,KAAjC,UAAAmC,EAAeQ,cAAf,eAAuBiB,SAAvB,UACSzB,EAAeQ,cADxB,cACS,EAAuBiB,YAEA5D,KAAhC,UAAAmC,EAAeQ,cAAf,eAAuBkB,QAAvB,UACS1B,EAAeQ,cADxB,cACS,EAAuBkB,MAEO,MAArB,OAAd1B,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBoB,gBACnB5B,EAAeQ,OAAOoB,YAGgB/D,KAA7B,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgBQ,cAAhB,eAAwBqB,wBACnB7B,EAAeQ,OAAOqB,eAI3B,gBAAU7B,QAAV,IAAUA,OAAV,EAAUA,EAAgB8B,WAC5B,OAAO9B,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBC,MAC/B,OAAO/B,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBP,SAC/B,OAAOvB,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBE,aAC/B,OAAOhC,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBnB,OAC/B,OAAOX,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBhB,MAC/B,OAAOd,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBV,UAC/B,OAAOpB,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBG,OAC/B,OAAOjC,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBI,QAC/B,OAAOlC,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBF,QAC/B,OAAO5B,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBrB,UAC/B,OAAOT,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBK,SAC/B,OAAOnC,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBM,aAGjC,OAAIpC,QAAJ,IAAIA,GAAJ,UAAIA,EAAgBQ,cAApB,OAAI,EAAwB6B,UAC1BrC,EAAe8B,OAAOQ,eAAgB,EACtCtC,EAAe8B,OAAOS,aAAc,GAE7BC,EAAuB,OAACxC,QAAD,IAACA,GAAD,UAACA,EAAgBQ,cAAjB,aAAC,EAAwBb,OACvDK,EAAe8B,OAAOQ,eAAgB,EACtCtC,EAAe8B,OAAOS,aAAc,GAEtC,oBAAcvC,QAAd,IAAcA,OAAd,EAAcA,EAAgBQ,gBAAiBR,EAAeQ,OAAO6B,SAEjE,OAACrC,QAAD,IAACA,GAAD,UAACA,EAAgB8B,cAAjB,OAAC,EAAwBS,cAC3B,eAASvC,QAAT,IAASA,OAAT,EAASA,EAAgB8B,gBAAiB9B,EAAe8B,OAAOnC,IAChE,kBAAYK,QAAZ,IAAYA,OAAZ,EAAYA,EAAgB8B,gBAAiB9B,EAAe8B,OAAON,aAG7B3D,KAAtB,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgB8B,cAAhB,eAAwBK,YAC1B,OAAOnC,QAAP,IAAOA,IAAP,UAAOA,EAAgB8B,cAAvB,cAAO,EAAwBK,UAiBjC,QAd8CtE,KAA5B,OAAdmC,QAAc,IAAdA,OAAA,EAAAA,EAAgByC,+BACXzC,EAAeyC,sBAGxB,OAAIzC,QAAJ,IAAIA,GAAJ,UAAIA,EAAgB0C,eAApB,OAAI,EAAyBC,OAC3B3C,EAAe0C,QAAQC,KAAO3C,EAAe0C,QAAQC,KAClDC,MAAM,KACNC,KAAK,UAGkChF,KAA1B,OAAdmC,QAAc,IAAdA,GAAA,UAAAA,EAAgB0C,eAAhB,eAAyBI,oBACpB9C,EAAe0C,QAAQI,WAIhB,OAAd9C,QAAc,IAAdA,GAAAA,EAAgB+C,gBAAhB,OACA/C,QADA,IACAA,GADA,UACAA,EAAgB+C,sBADhB,OACA,EAAgCzF,YAWhC,UATO0C,EAAe+C,eAAeC,eACbvG,OAAOC,KAAKsD,EAAe+C,gBAChDE,KACC,SAACC,GAAD,OAC6B,IAA3BA,EAAKrD,QAAQ,YAC2B,IAAxCG,EAAe+C,eAAeG,EAFhC,IAIDC,QAAO,SAACC,EAAMC,GAAP,OAAqBD,GAAOC,CAA5B,IAIH,CAAC,IAAD,kBACmD,MAKE,MAKC,MAKH,MAfxD,UAAIrD,QAAJ,IAAIA,GAAJ,UAAIA,EAAgB+C,sBAApB,iBAAI,EAAgCzF,mBAApC,OAAI,EAA6CgG,MAC/CtD,EAAe+C,eAAezF,YAAYgG,MAA1C,OACEtD,QADF,IACEA,GADF,WACEA,EAAgB+C,sBADlB,mBACE,GAAgCzF,mBADlC,cACE,GAA6CgG,MAAM,GAGvD,UAAItD,QAAJ,IAAIA,GAAJ,UAAIA,EAAgB+C,sBAApB,iBAAI,EAAgCzF,mBAApC,OAAI,EAA6CiG,QAC/CvD,EAAe+C,eAAezF,YAAYiG,QAA1C,OACEvD,QADF,IACEA,GADF,WACEA,EAAgB+C,sBADlB,mBACE,GAAgCzF,mBADlC,cACE,GAA6CiG,QAAQ,GAGzD,UAAIvD,QAAJ,IAAIA,GAAJ,UAAIA,EAAgB+C,sBAApB,iBAAI,EAAgCzF,mBAApC,OAAI,EAA6CkG,SAC/CxD,EAAe+C,eAAezF,YAAYkG,SAA1C,OACExD,QADF,IACEA,GADF,WACEA,EAAgB+C,sBADlB,mBACE,GAAgCzF,mBADlC,cACE,GAA6CkG,SAAS,GAG1D,UAAIxD,QAAJ,IAAIA,GAAJ,WAAIA,EAAgB+C,sBAApB,mBAAI,GAAgCzF,mBAApC,QAAI,GAA6CmG,MAC/CzD,EAAe+C,eAAezF,YAAYmG,MAA1C,OACEzD,QADF,IACEA,GADF,WACEA,EAAgB+C,sBADlB,mBACE,GAAgCzF,mBADlC,cACE,GAA6CmG,MAAM,EAExD,aArBQzD,EAAe+C,eAAezF,YAuBzC,OAAO0C,CACR,EAEY0D,EAAoB,SAAC3D,GAAc,IAAD,4DACvC4D,EAAgB,CAAC,EAEjBnD,EAAST,EAASS,OAExBmD,EAAcC,cAAd,OAA8B7D,QAA9B,IAA8BA,GAA9B,UAA8BA,EAAU+B,cAAxC,aAA8B,EAAkBN,OAChDmC,EAAcE,WAAd,OAA2B9D,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAU+B,cAArC,aAA2B,EAAkBnC,IAC7CgE,EAAcG,KAAd,OAAqB/D,QAArB,IAAqBA,GAArB,UAAqBA,EAAUK,oBAA/B,aAAqB,EAAwB0D,KAC7CH,EAAcI,WAAd,OAA2BhE,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAUA,gBAArC,aAA2B,EAAoBiE,UAC/CL,EAAclF,OAAd,OAAuBsB,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAUA,gBAAjC,aAAuB,EAAoBkE,KAE3C,IAgCoC,sBA+De,cA/F7CC,IAAQC,EAAAA,EAAAA,MACRF,GAAI,OAAGC,SAAH,IAAGA,QAAH,EAAGA,GAAQP,EAAclF,QAEnC,UAAIwF,SAAJ,IAAIA,IAAAA,GAAMG,kBACR,IAAK,IAAIC,GAAS,EAAGA,KAAM,OAAIJ,SAAJ,IAAIA,QAAJ,EAAIA,GAAMG,mBAAmBC,KAAU,CAAC,IAAD,GAC1DC,GAAU,iBAAaD,IACvBE,GAAS,eAAWF,GAAS,EAAIA,GAAS,IAChDV,EAAcW,IAAc5G,KAAKC,OACvB,OAARoC,QAAQ,IAARA,GAAA,WAAAA,EAAUA,gBAAV,iBAAqBwE,KAAa/I,GAClCgJ,UACH,EAGHb,EAAcc,aACZ,iBAAG1E,QAAH,IAAGA,GAAH,UAAGA,EAAUK,oBAAb,aAAG,EAAwBmB,QAA3B,oBAAuCxB,QAAvC,IAAuCA,GAAvC,UAAuCA,EAAUK,oBAAjD,aAAuC,EAAwBoB,OAA/D,mBAAyEzB,QAAzE,IAAyEA,GAAzE,UAAyEA,EAAUK,oBAAnF,aAAyE,EAAwBqB,MAAjG,mBAA0G1B,QAA1G,IAA0GA,GAA1G,UAA0GA,EAAUK,oBAApH,aAA0G,EAAwBsB,MAAOC,OAC3IgC,EAAce,iBAAd,OAAiC3E,QAAjC,IAAiCA,GAAjC,UAAiCA,EAAUK,oBAA3C,aAAiC,EAAwB4B,YACzD2B,EAAcgB,aAAuB,OAAR5E,QAAQ,IAARA,GAAA,UAAAA,EAAUK,oBAAV,mBAAwBU,YAAxB,SAA8BF,GACvDC,SAAQ,OAACd,QAAD,IAACA,GAAD,UAACA,EAAUK,oBAAX,iBAAC,EAAwBU,YAAzB,aAAC,EAA8BF,IACvC,EACJ+C,EAAciB,cAAwB,OAAR7E,QAAQ,IAARA,GAAA,UAAAA,EAAUK,oBAAV,mBAAwBO,aAAxB,SAA+BC,GACzDC,SAAQ,OAACd,QAAD,IAACA,GAAD,UAACA,EAAUK,oBAAX,iBAAC,EAAwBO,aAAzB,aAAC,EAA+BC,IACxC,EACJ+C,EAAckB,yBAAmC,OAAR9E,QAAQ,IAARA,GAAA,UAAAA,EAAUK,oBAAV,SAAwB0E,oBAC7D/E,EAASK,aAAa0E,oBAAoBC,QAAQ,KAAM,IACxD,GACJpB,EAAcqB,KAAd,OAAqBjF,QAArB,IAAqBA,GAArB,UAAqBA,EAAUK,oBAA/B,aAAqB,EAAwB4E,KAC7CrB,EAAcrD,sBAAd,OACEP,QADF,IACEA,GADF,UACEA,EAAUK,oBADZ,aACE,EAAwBE,sBAE1BqD,EAAcsB,iBACN,OAANzE,QAAM,IAANA,OAAA,EAAAA,EAAQb,QAAR,OAAgBI,QAAhB,IAAgBA,GAAhB,UAAgBA,EAAU+B,cAA1B,aAAgB,EAAkBnC,OAAlC,OAAyCa,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAQS,YAE9C0C,EAAcsB,mBACjBtB,EAAcuB,eAAiB,CAAC,EAChCvB,EAAcuB,eAAeC,aAAa,OAACpF,QAAD,IAACA,GAAD,UAACA,EAAUS,cAAX,OAAC,EAAkBS,YAC7D0C,EAAcuB,eAAevF,IAA7B,OAAmCa,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAQb,IAC3CgE,EAAcuB,eAAenD,KAA7B,OAAoCvB,QAApC,IAAoCA,OAApC,EAAoCA,EAAQuB,KAC5C4B,EAAcuB,eAAeE,QAC3B,iBAAG5E,QAAH,IAAGA,OAAH,EAAGA,EAAQY,SAAX,mBAAuBZ,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAQa,UAAWM,OAC5CgC,EAAcuB,eAAeG,UAAY,OAACtF,QAAD,IAACA,GAAD,UAACA,EAAUS,cAAX,OAAC,EAAkBS,YAAnB,OACrCT,QADqC,IACrCA,OACA3C,EADA2C,EAAQU,SAEZyC,EAAcuB,eAAeI,WAAa,OAACvF,QAAD,IAACA,GAAD,UAACA,EAAUS,cAAX,OAAC,EAAkBS,YAAnB,OACtCT,QADsC,IACtCA,OACA3C,EADA2C,EAAQW,UAGZwC,EAAcuB,eAAe3D,QAC3BxB,EAASS,OAAOb,MAAQI,EAAS+B,OAAOnC,MACT,IAA/BI,EAASS,OAAOS,WACZlB,EAAS+B,OAAOP,QAChB,oBAAGxB,EAASS,cAAZ,aAAG,EAAiBe,QAApB,uBAAgCxB,EAASS,cAAzC,aAAgC,EAAiBgB,OAAjD,sBAA2DzB,EAASS,cAApE,aAA2D,EAAiBiB,MAA5E,sBAAqF1B,EAASS,cAA9F,aAAqF,EAAiBkB,MAAOC,OAEnHgC,EAAcuB,eAAeK,QAAgB,OAAN/E,QAAM,IAANA,GAAA,UAAAA,EAAQM,YAAR,SAAcF,GACjDC,SAAQ,OAACL,QAAD,IAACA,GAAD,UAACA,EAAQM,YAAT,aAAC,EAAcF,IACvB,EAEJ+C,EAAcuB,eAAeM,SAAiB,OAANhF,QAAM,IAANA,GAAA,UAAAA,EAAQG,aAAR,SAAeC,GACnDC,SAAQ,OAACL,QAAD,IAACA,GAAD,UAACA,EAAQG,aAAT,aAAC,EAAeC,IACxB,EAEJ+C,EAAcuB,eAAelD,YAA7B,OAA2CxB,QAA3C,IAA2CA,OAA3C,EAA2CA,EAAQwB,YACnD2B,EAAcuB,eAAejD,MAA7B,OAAqCzB,QAArC,IAAqCA,OAArC,EAAqCA,EAAQyB,MAC7C0B,EAAcuB,eAAenG,MAA7B,OAAqCyB,QAArC,IAAqCA,OAArC,EAAqCA,EAAQ0B,OAC7CyB,EAAcuB,eAAetD,OAA7B,OAAsCpB,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAQoB,OAC9C+B,EAAcuB,eAAeO,KAA7B,OAAoCjF,QAApC,IAAoCA,OAApC,EAAoCA,EAAQC,SAC5CkD,EAAcuB,eAAeQ,mBAA7B,OACE3F,QADF,IACEA,OADF,EACEA,EAAU4F,wBAEZhC,EAAcuB,eAAiB3I,EAAaoH,EAAcuB,kBAG5DvB,EAAciC,gBAAiB,EAE1BjC,EAAciC,iBACjBjC,EAAckC,eAAiB,CAAC,GAGlClC,EAAcmC,aAAd,OAA6B/F,QAA7B,IAA6BA,GAA7B,UAA6BA,EAAU2C,eAAvC,aAA6B,EAAmBC,KAChDgB,EAAcoC,gBAAd,OAAgChG,QAAhC,IAAgCA,GAAhC,UAAgCA,EAAU2C,eAA1C,aAAgC,EAAmBsD,cACnDrC,EAAcsC,SAAd,OAAyBlG,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAU2C,eAAnC,aAAyB,EAAmBwD,eAE5CvC,EAAcwC,QAAkB,OAARpG,QAAQ,IAARA,GAAA,UAAAA,EAAUA,gBAAV,SAAoBqG,YAChC,OAARrG,QAAQ,IAARA,GAAA,UAAAA,EAAUS,cAAV,SAAkB6F,gBAChB,KACA,KACF,KAGJ1C,EAAcrG,YAAd,OAA4ByC,QAA5B,IAA4BA,GAA5B,UAA4BA,EAAUK,oBAAtC,aAA4B,EAAwB9C,YACpDqG,EAAc2C,gCAAd,OAAgDvG,QAAhD,IAAgDA,OAAhD,EAAgDA,EAAUwG,eAC1D,OAAIxG,QAAJ,IAAIA,GAAJ,UAAIA,EAAUA,gBAAd,OAAI,EAAoBiE,YACtBL,EAAc6C,gCAAd,OAAgDzG,QAAhD,IAAgDA,OAAhD,EAAgDA,EAAUwG,gBAE5D5C,EAAc8C,mCAAd,OAAmD1G,QAAnD,IAAmDA,OAAnD,EAAmDA,EAAU0G,mCAE7D,OAAI1G,QAAJ,IAAIA,GAAJ,UAAIA,EAAU2G,wBAAd,OAAI,EAA4BC,qBAC9BhD,EAAc+C,iBAAmB,CAAC,EAClC/C,EAAc+C,iBAAiBE,IAA/B,OAAqC7G,QAArC,IAAqCA,GAArC,UAAqCA,EAAU2G,wBAA/C,aAAqC,EAA4BE,IAAI7B,QAAQ,KAAM,IACnFpB,EAAc+C,iBAAiBG,wBAA/B,OACE9G,QADF,IACEA,GADF,UACEA,EAAU2G,wBADZ,aACE,EAA4BG,wBAE9BlD,EAAc+C,iBAAiBI,mBAAqBpJ,KAAKC,OAC/C,OAARoC,QAAQ,IAARA,GAAA,UAAAA,EAAU2G,wBAAV,eAA4BI,oBAC1BtL,GACFgJ,WAEFb,EAAc+C,iBAAiBK,kBAA/B,OACEhH,QADF,IACEA,GADF,UACEA,EAAU2G,wBADZ,aACE,EAA4BK,kBAC9BpD,EAAc+C,iBAAiBM,WAA/B,OACEjH,QADF,IACEA,GADF,UACEA,EAAU2G,wBADZ,aACE,EAA4BM,WAC9BrD,EAAc+C,iBAAiBO,aAA/B,OACElH,QADF,IACEA,GADF,UACEA,EAAU2G,wBADZ,aACE,EAA4BO,aAC9BtD,EAAc+C,iBAAiBpJ,YAA/B,OACEyC,QADF,IACEA,GADF,UACEA,EAAU2G,wBADZ,aACE,EAA4BpJ,YAE9BqG,EAAc+C,iBAAmBnK,EAC/BoH,EAAc+C,mBAIlB,OAAOnK,EAAaoH,EACrB,EAEYuD,EAAkB,SAAC1K,GAAU,IAAD,QACjC2K,EAAc,CAAC,EA4BrB,GA1BAA,EAAYC,aAAe5K,EAAKsF,OAAOb,WApYT,SACC,WAsY/BkG,EAAYE,IAAM7K,EAAKsF,OAAOC,KAC9BoF,EAAYG,IAAM9K,EAAKsF,OAAOnC,IAC9BwH,EAAYI,IAAM/K,EAAKsF,OAAOI,OAC9BiF,EAAYK,KAAOhL,EAAKsF,OAAOF,QAAU,GACzCuF,EAAYlF,MAAQzF,EAAKsF,OAAOG,MAChCkF,EAAYM,GAAKjL,EAAKsF,OAAOE,YAC7BmF,EAAYO,UAAYlL,EAAKsF,OAAOnB,MAAMC,GAC1CuG,EAAYQ,OACV,oBAAGnL,EAAKsF,cAAR,aAAG,EAAaP,QAAhB,uBAA4B/E,EAAKsF,cAAjC,aAA4B,EAAaN,OAAzC,sBAAmDhF,EAAKsF,cAAxD,aAAmD,EAAaL,MAAhE,sBAAyEjF,EAAKsF,cAA9E,aAAyE,EAAaJ,MAAOC,OAC/FwF,EAAYS,SAAWpL,EAAKsF,OAAOhB,KAAKF,GACxCuG,EAAYU,OAASrL,EAAKsF,OAAOrB,SAEjC0G,EAAYW,eACsB,SAAhCtL,EAAKkG,QAAQoF,eACTpM,EACgC,gBAAhCc,EAAKkG,QAAQoF,eAvZqB,MAyZlCpM,EAENyL,EAAYrB,aAAetJ,EAAKkG,QAAQC,KACxCwE,EAAYY,MAAQvL,EAAKuL,MACzBZ,EAAYa,MAAQxL,EAAKwL,MAErBxL,EAAKsF,OAAOb,WAAY,CAC1B,IAAMgH,EAAO,UAAMzL,EAAKsF,OAAOV,SAAlB,YAA8B5E,EAAKsF,OAAOT,UACvD8F,EAAYe,OAASD,EAAQtG,MAC9B,MACCwF,EAAYgB,iBAAmB3L,EAAKsF,OAAOX,UAC3CgG,EAAYiB,iBAAmB5L,EAAKsF,OAAOZ,SAG7C,OAAOiG,CACR,EASYkB,EAAkB,SAAC,GAC9B,OADmD,EAAnBpK,aACV,QAAU,OACjC,EAEYqK,EAAsB,SACjCpE,EACAhF,GAII,IAAD,QAHHqJ,EAGG,uDAHK,YACRC,EAEG,uCADHC,EACG,uCACGxE,GAAa,OAAN/E,QAAM,IAANA,OAAA,EAAAA,EAAQ+E,QAAR,OAAgB/E,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAQT,QACjCiK,EAAS,EACTC,GAAU,EAEd,QAAoB9K,IAAhBqG,EAAMD,GAAqB,OAAO,EAEtC,IAAK,IAAI2E,EAAI,EAAGA,IAAC,UAAI1E,EAAMD,UAAV,aAAI,EAAaG,mBAAmBwE,IAAK,CAAC,IAAD,EAGhC,EAEjB,EAJDC,EAAa,IAAND,EAAU,QAAV,eAA4BA,GAEzC,GAAIL,EAAMO,MAAM,OACfH,EAAUzJ,EAAO2J,KAAP,UAAgB3E,EAAMD,GAAMsE,UAA5B,aAAgB,EAAoB3K,YAE7C+K,EAAkB,SAAR1E,GACN/E,EAAO2J,KAAP,UAAgB3E,EAAMD,GAAMsE,UAA5B,aAAgB,EAAoB3K,OAI1C+K,GAAWD,SACM7K,IAAjBqB,EAAO2J,IAAuBH,GAC/B,CAED,GAAIA,IAAM,UAAIxE,EAAMD,GAAMsE,UAAhB,aAAI,EAAoBQ,mBAChC,OAAO,EAGT,IAAMC,GACJ,UAAA9E,EAAMD,UAAN,eAAaG,oBAAb,UAAiCF,EAAMD,GAAMsE,UAA7C,aAAiC,EAAoBQ,mBACjD,wBACA,qBAEN,OAAOP,EAAY,CACjBS,QAASR,EAAEF,EAAMO,MAAM,OAASE,EAAW,qBAAsB,CAC/DE,MAAK,UAAEhF,EAAMD,GAAMsE,UAAd,aAAE,EAAoB3K,SAGhC,EAEYuL,EAAe,CAC1BC,MAAO,WACPC,gBAAiB,MACjBC,IAAK,mBACLvC,kBAAmB,eACnBwC,WAAY,6DACZ3C,IAAK,6BACL4C,YAAY,EACZC,qBACE,yIACFC,KAAM,OACNC,iBAAkB,iBAClBC,aAAa,EACbC,QAAS,IAGEC,EAAwB,SAACtN,EAAMuN,GAAoB,IAAD,QAM3C,EAMd,EAXEC,EAAe,CAAC,GACtBA,EAAaC,WAAb,OAA0BzN,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAMsF,cAAhC,aAA0B,EAAcN,OACxCwI,EAAa1C,IAAb,OAAmB9K,QAAnB,IAAmBA,GAAnB,UAAmBA,EAAMsF,cAAzB,aAAmB,EAAcnC,IACjCqK,EAAaE,gBAAb,OAA+B1N,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAMkG,eAArC,aAA+B,EAAeC,KAC9CqH,EAAaG,OAAStJ,SAAQ,OAACrE,QAAD,IAACA,GAAD,UAACA,EAAMkG,eAAP,aAAC,EAAeyH,QAC3CJ,IACDC,EAAaC,WAAb,OAA0BzN,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAMsF,cAAhC,aAA0B,EAAcsI,eACxCJ,EAAaK,WAAb,OAA0B7N,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAM6N,WAChCL,EAAaM,aAAb,OAA4B9N,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAM8N,aAClCN,EAAaO,mBAAqB,KAGlCP,EAAaO,mBAAyB,OAAJ/N,QAAI,IAAJA,GAAA,UAAAA,EAAMkG,eAAN,SAAesD,cAAgB,EAAI,EAEvE,OAAOgE,CACR,EAEYQ,EAAuB,SAACC,EAAKC,EAAGC,GAC3C,IAAIC,EAAUC,EAAQ,MACtBC,IAAAA,OAAaF,GAGb,IAFA,IAAMG,EAAQD,IAAML,GAChBO,EAAS,GACJpC,EAAE,EAAGoC,EAAOjO,OAAO2N,EAAG9B,IAAK,CAClC,IAAIqC,EAAgBF,EAAMG,IAAItC,EAAG,OAC3BuC,EAAUF,EAAcG,aAC9B,GAAgB,IAAZD,GACY,IAAZA,EAAJ,CACA,IAAME,EAAMJ,EAAcK,OAAO,cAC7BX,EAAeY,SAASF,IAE5BL,EAAOQ,KAAKH,EAJe,CAK5B,CACD,OAAOL,CACR,EAEYS,EAAkB,SAAChN,GAE9B,OADc,IAAIiN,OAAO,sBACZC,KAAKlN,EACnB,EACYmN,EAAkB,SAACnN,GAE9B,OADc,IAAIiN,OAAO,sBACZC,KAAKlN,EACnB,EACYoN,EAAuB,SAACpN,GACnC,OAAOA,EAAOqN,cAAchD,MAAM,OACnC,EAEYtG,EAA0B,SAACuJ,GACtC,MAAO,KAAKJ,KAAKI,EAClB,C","sources":["services/utils.js"],"sourcesContent":["import { getRates } from '../services/api'\nimport dayjs from 'dayjs'\n\nexport const THOUSANDS_CONVERSION_FACTOR = 1000\n\nexport const CNAE_HOUSING = '9820'\nexport const PAYMENT_METHOD_PAYMENT_ORDER = 'remesa'\nexport const PAYMENT_METHOD_CREDIT_CARD = 'tpv'\nexport const USER_TYPE_PERSON = 'fisica'\nexport const USER_TYPE_COMPANY = 'juridica'\n\nexport const NEW_MEMBER_CONTRIB_AMOUNT = 100\n\nexport const languages = {\n  es_ES: 'Español',\n  ca_ES: 'Català'\n}\n\nexport const contributionParams = {\n  generationMinAnnualUse:1,\n  generationMinNumActions:1,\n  generationMaxNumActions:49,\n  minContribution: 100,\n  maxContribution: 100000,\n  contributionStep: 100,\n  maxPercentOverAnnualUse: 100\n}\n\nconst sanitizeData = (data) => {\n  Object.keys(data).forEach(\n    (key) =>\n      (data[key] == null ||\n        data[key] === '' ||\n        (Array.isArray(data[key]) && !data[key].length)) &&\n      delete data[key]\n  )\n  return data\n}\n\nconst normalizeCommonModifyData = (params) => {\n  const { modify, contact } = params\n\n  const data = {\n    phase: modify?.phases,\n    attachments: [...modify?.attachments, ...modify?.power_attachments],\n    power_p1: modify?.changePower\n      ? Math.round(modify?.power * THOUSANDS_CONVERSION_FACTOR)\n      : undefined,\n    power_p2: modify?.changePower\n      ? Math.round(modify?.power2 * THOUSANDS_CONVERSION_FACTOR)\n      : undefined,\n    power_p3:\n      modify?.changePower && modify?.moreThan15Kw\n        ? Math.round(modify?.power3 * THOUSANDS_CONVERSION_FACTOR)\n        : undefined,\n    power_p4:\n      modify?.changePower && modify?.moreThan15Kw\n        ? Math.round(modify?.power4 * THOUSANDS_CONVERSION_FACTOR)\n        : undefined,\n    power_p5:\n      modify?.changePower && modify?.moreThan15Kw\n        ? Math.round(modify?.power5 * THOUSANDS_CONVERSION_FACTOR)\n        : undefined,\n    power_p6:\n      modify?.changePower && modify?.moreThan15Kw\n        ? Math.round(modify?.power6 * THOUSANDS_CONVERSION_FACTOR)\n        : undefined,\n    tariff: modify?.changePower ? modify?.tariff : undefined,\n    contact_name: contact?.contactName,\n    contact_surname: contact?.contactSurname,\n    contact_phone: contact?.phone\n  }\n\n  return data\n}\n\nexport const normalizeModifyData = (params) => {\n  const data = { ...normalizeCommonModifyData(params) }\n  return sanitizeData(data)\n}\n\nexport const normalizeD1ConfirmationData = (values) => {\n  let contractModification = null\n  if (values?.modify) {\n    contractModification = sanitizeData(normalizeCommonModifyData(values))\n  }\n\n  const data = {\n    confirm: values?.validate,\n    attachments: values?.d1Attachments,\n    refuse_reason: values?.refuseReason,\n    contract_modification: values?.modify ? contractModification : null\n  }\n\n  return sanitizeData(data)\n}\n\nexport const checkPhisicalVAT = (vat) => {\n  if (vat === undefined) return undefined\n  var firstchar = vat[0]\n  return '0123456789KLMXYZ'.indexOf(firstchar) !== -1\n}\n\nexport const normalizeHolderChange = (contract) => {\n  const normalContract = JSON.parse(JSON.stringify(contract))\n\n  if (normalContract?.supply_point?.verified !== undefined) {\n    delete normalContract.supply_point.verified\n  }\n\n  if (normalContract?.supply_point?.supply_point_accepted !== undefined) {\n    delete normalContract.supply_point.supply_point_accepted\n  }\n\n  if (normalContract?.supply_point?.status !== undefined) {\n    delete normalContract.supply_point.status\n  }\n\n  if (normalContract?.holder?.language?.code !== undefined) {\n    normalContract.holder.language = normalContract.holder.language.code\n  }\n\n  if (normalContract?.holder?.state?.id !== undefined) {\n    normalContract.holder.state = parseInt(normalContract.holder.state.id)\n  }\n\n  if (normalContract?.holder?.city?.id !== undefined) {\n    normalContract.holder.city = parseInt(normalContract.holder.city.id)\n  }\n\n  if (normalContract?.holder?.vatexists !== undefined) {\n    delete normalContract.holder.vatexists\n  }\n\n  if (normalContract?.holder?.vatvalid !== undefined) {\n    delete normalContract.holder.vatvalid\n  }\n\n  if (normalContract?.holder?.isphisical !== undefined) {\n    if (normalContract?.holder?.isphisical === true) {\n      delete normalContract.holder.proxynif\n      delete normalContract.holder.proxyname\n    } else {\n      delete normalContract.holder.surname1\n      delete normalContract.holder.surname2\n    }\n    delete normalContract.holder.isphisical\n    delete normalContract.holder.proxynif_phisical\n  }\n\n  normalContract.holder.address =\n    `${normalContract.holder?.address}, ${normalContract.holder?.number} ${normalContract.holder?.floor} ${normalContract.holder?.door}`.trim()\n\n  normalContract.holder?.number !== undefined &&\n    delete normalContract.holder?.number\n\n  normalContract.holder?.floor !== undefined &&\n    delete normalContract.holder?.floor\n\n  normalContract.holder?.door !== undefined &&\n    delete normalContract.holder?.door\n\n  if (normalContract?.holder?.phone2 === '') {\n    delete normalContract.holder.phone2\n  }\n\n  if (normalContract?.holder?.proxynif_valid !== undefined) {\n    delete normalContract.holder.proxynif_valid\n  }\n\n  // delete member fields\n  if ('name' in normalContract?.member) {\n    delete normalContract?.member?.name\n    delete normalContract?.member?.address\n    delete normalContract?.member?.postal_code\n    delete normalContract?.member?.state\n    delete normalContract?.member?.city\n    delete normalContract?.member?.surname1\n    delete normalContract?.member?.email\n    delete normalContract?.member?.phone1\n    delete normalContract?.member?.phone2\n    delete normalContract?.member?.language\n    delete normalContract?.member?.checked\n    delete normalContract?.member?.full_name\n  }\n\n  if (normalContract?.holder?.ismember) {\n    normalContract.member.become_member = false\n    normalContract.member.link_member = false\n  }\n  else if (isHomeOwnerCommunityNif(normalContract?.holder?.vat)) {\n    normalContract.member.become_member = false\n    normalContract.member.link_member = true\n  }\n  'ismember' in normalContract?.holder && delete normalContract.holder.ismember\n\n  if (!normalContract?.member?.link_member) {\n    'vat' in normalContract?.member && delete normalContract.member.vat\n    'number' in normalContract?.member && delete normalContract.member.number\n  }\n\n  if (normalContract?.member?.checked !== undefined) {\n    delete normalContract?.member?.checked\n  }\n\n  if (normalContract?.legal_person_accepted !== undefined) {\n    delete normalContract.legal_person_accepted\n  }\n\n  if (normalContract?.payment?.iban) {\n    normalContract.payment.iban = normalContract.payment.iban\n      .split(' ')\n      .join('')\n  }\n\n  if (normalContract?.payment?.iban_valid !== undefined) {\n    delete normalContract.payment.iban_valid\n  }\n\n  if (\n    normalContract?.especial_cases &&\n    normalContract?.especial_cases?.attachments\n  ) {\n    delete normalContract.especial_cases.reason_default\n    const hasSpecialCases = Object.keys(normalContract.especial_cases)\n      .map(\n        (prop) =>\n          prop.indexOf('reason') === 0 &&\n          normalContract.especial_cases[prop] === true\n      )\n      .reduce((prev, current) => (!prev ? current : prev))\n\n    if (!hasSpecialCases) {\n      delete normalContract.especial_cases.attachments\n    } else {\n      if (normalContract?.especial_cases?.attachments?.death) {\n        normalContract.especial_cases.attachments.death =\n          normalContract?.especial_cases?.attachments?.death[0]\n      }\n\n      if (normalContract?.especial_cases?.attachments?.medical) {\n        normalContract.especial_cases.attachments.medical =\n          normalContract?.especial_cases?.attachments?.medical[0]\n      }\n\n      if (normalContract?.especial_cases?.attachments?.resident) {\n        normalContract.especial_cases.attachments.resident =\n          normalContract?.especial_cases?.attachments?.resident[0]\n      }\n\n      if (normalContract?.especial_cases?.attachments?.merge) {\n        normalContract.especial_cases.attachments.merge =\n          normalContract?.especial_cases?.attachments?.merge[0]\n      }\n    }\n  }\n  return normalContract\n}\n\nexport const normalizeContract = (contract) => {\n  const finalContract = {}\n\n  const holder = contract.holder\n\n  finalContract.member_number = contract?.member?.number\n  finalContract.member_vat = contract?.member?.vat\n  finalContract.cups = contract?.supply_point?.cups\n  finalContract.is_indexed = contract?.contract?.isIndexed\n  finalContract.tariff = contract?.contract?.rate\n\n  const rates = getRates()\n  const rate = rates?.[finalContract.tariff]\n\n  if (rate?.num_power_periods) {\n    for (let period = 1; period <= rate?.num_power_periods; period++) {\n      const periodAttr = `power_p${period}`\n      const periodKey = `power${period > 1 ? period : ''}`\n      finalContract[periodAttr] = Math.round(\n        contract?.contract?.[periodKey] * THOUSANDS_CONVERSION_FACTOR\n      ).toString()\n    }\n  }\n\n  finalContract.cups_address =\n    `${contract?.supply_point?.address}, ${contract?.supply_point?.number} ${contract?.supply_point?.floor} ${contract?.supply_point?.door}`.trim()\n  finalContract.cups_postal_code = contract?.supply_point?.postal_code\n  finalContract.cups_city_id = contract?.supply_point?.city?.id\n    ? parseInt(contract?.supply_point?.city?.id)\n    : 0\n  finalContract.cups_state_id = contract?.supply_point?.state?.id\n    ? parseInt(contract?.supply_point?.state?.id)\n    : 0\n  finalContract.cups_cadastral_reference = contract?.supply_point?.cadastral_reference\n    ? contract.supply_point.cadastral_reference.replace(/ /g, '')\n    : '';\n  finalContract.cnae = contract?.supply_point?.cnae\n  finalContract.supply_point_accepted =\n    contract?.supply_point?.supply_point_accepted\n\n  finalContract.owner_is_member =\n    holder?.vat === contract?.member?.vat && holder?.isphisical\n\n  if (!finalContract.owner_is_member) {\n    finalContract.contract_owner = {}\n    finalContract.contract_owner.is_juridic = !contract?.holder?.isphisical\n    finalContract.contract_owner.vat = holder?.vat\n    finalContract.contract_owner.name = holder?.name\n    finalContract.contract_owner.surname =\n      `${holder?.surname1} ${holder?.surname2}`.trim()\n    finalContract.contract_owner.proxy_vat = !contract?.holder?.isphisical\n      ? holder?.proxynif\n      : undefined\n    finalContract.contract_owner.proxy_name = !contract?.holder?.isphisical\n      ? holder?.proxyname\n      : undefined\n\n    finalContract.contract_owner.address =\n      contract.holder.vat === contract.member.vat &&\n      contract.holder.isphisical === true\n        ? contract.member.address\n        : `${contract.holder?.address}, ${contract.holder?.number} ${contract.holder?.floor} ${contract.holder?.door}`.trim()\n\n    finalContract.contract_owner.city_id = holder?.city?.id\n      ? parseInt(holder?.city?.id)\n      : 0\n\n    finalContract.contract_owner.state_id = holder?.state?.id\n      ? parseInt(holder?.state?.id)\n      : 0\n\n    finalContract.contract_owner.postal_code = holder?.postal_code\n    finalContract.contract_owner.email = holder?.email\n    finalContract.contract_owner.phone = holder?.phone1\n    finalContract.contract_owner.phone2 = holder?.phone2\n    finalContract.contract_owner.lang = holder?.language\n    finalContract.contract_owner.privacy_conditions =\n      contract?.privacy_policy_accepted\n\n    finalContract.contract_owner = sanitizeData(finalContract.contract_owner)\n  }\n\n  finalContract.owner_is_payer = true\n\n  if (!finalContract.owner_is_payer) {\n    finalContract.contract_payer = {}\n  }\n\n  finalContract.payment_iban = contract?.payment?.iban\n  finalContract.sepa_conditions = contract?.payment?.sepa_accepted\n  finalContract.donation = contract?.payment?.voluntary_cent\n\n  finalContract.process = contract?.contract?.has_service\n    ? contract?.holder?.previous_holder\n      ? 'C1'\n      : 'C2'\n    : 'A3'\n\n\n  finalContract.attachments = contract?.supply_point?.attachments\n  finalContract.general_contract_terms_accepted = contract?.terms_accepted\n  if (contract?.contract?.isIndexed) {\n    finalContract.indexed_specific_terms_accepted = contract?.terms_accepted\n  }\n  finalContract.particular_contract_terms_accepted = contract?.particular_contract_terms_accepted\n\n  if (contract?.self_consumption?.have_installation) {\n    finalContract.self_consumption = {}\n    finalContract.self_consumption.cau = contract?.self_consumption?.cau.replace(/ /g, '')\n    finalContract.self_consumption.collective_installation =\n      contract?.self_consumption?.collective_installation\n\n    finalContract.self_consumption.installation_power = Math.round(\n      contract?.self_consumption?.installation_power *\n        THOUSANDS_CONVERSION_FACTOR\n    ).toString()\n\n    finalContract.self_consumption.installation_type =\n      contract?.self_consumption?.installation_type\n    finalContract.self_consumption.technology =\n      contract?.self_consumption?.technology\n    finalContract.self_consumption.aux_services =\n      contract?.self_consumption?.aux_services\n    finalContract.self_consumption.attachments =\n      contract?.self_consumption?.attachments\n\n    finalContract.self_consumption = sanitizeData(\n      finalContract.self_consumption\n    )\n  }\n\n  return sanitizeData(finalContract)\n}\n\nexport const normalizeMember = (data) => {\n  const finalMember = {}\n\n  finalMember.tipuspersona = data.member.isphisical\n    ? USER_TYPE_PERSON\n    : USER_TYPE_COMPANY\n  finalMember.nom = data.member.name\n  finalMember.dni = data.member.vat\n  finalMember.tel = data.member.phone1\n  finalMember.tel2 = data.member.phone2 || ''\n  finalMember.email = data.member.email\n  finalMember.cp = data.member.postal_code\n  finalMember.provincia = data.member.state.id\n  finalMember.adreca =\n    `${data.member?.address}, ${data.member?.number} ${data.member?.floor} ${data.member?.door}`.trim()\n  finalMember.municipi = data.member.city.id\n  finalMember.idioma = data.member.language\n\n  finalMember.payment_method =\n    data.payment.payment_method === 'iban'\n      ? PAYMENT_METHOD_PAYMENT_ORDER\n      : data.payment.payment_method === 'credit_card'\n      ? PAYMENT_METHOD_CREDIT_CARD\n      : PAYMENT_METHOD_PAYMENT_ORDER\n\n  finalMember.payment_iban = data.payment.iban\n  finalMember.urlok = data.urlok\n  finalMember.urlko = data.urlko\n\n  if (data.member.isphisical) {\n    const cognoms = `${data.member.surname1} ${data.member.surname2}`\n    finalMember.cognom = cognoms.trim()\n  } else {\n    finalMember.representant_nom = data.member.proxyname\n    finalMember.representant_dni = data.member.proxynif\n  }\n\n  return finalMember\n}\n\nexport const specialCaseType = (specialCases) => {\n  if (specialCases.reason_death) return 'SPECIAL_CASES_DEATH'\n  else if (specialCases.reason_merge) return 'SPECIAL_CASES_MERGE'\n  else if (specialCases.reason_electrodep) return 'SPECIAL_CASES_ELECTRODEP'\n  else return ''\n}\n\nexport const calculateTariff = ({ moreThan15Kw }) => {\n  return moreThan15Kw ? '3.0TD' : '2.0TD'\n}\n\nexport const testPowerForPeriods = (\n  rates,\n  values,\n  limit = 'min_power',\n  createError,\n  t\n) => {\n  const rate = values?.rate || values?.tariff\n  let valids = 0\n  let inLimit = false\n\n  if (rates[rate] === undefined) return true\n\n  for (let i = 1; i <= rates[rate]?.num_power_periods; i++) {\n    const attr = i === 1 ? 'power' : `power${i}`\n\n    if (limit.match('min')) {\n     inLimit = values[attr] >= rates[rate][limit]?.power\n    } else {\n      inLimit = rate == '2.0TD'\n        ? values[attr] <= rates[rate][limit]?.power\n        : true\n    }\n\n    inLimit && valids++\n    values[attr] === undefined && valids++\n  }\n\n  if (valids >= rates[rate][limit]?.num_periods_apply) {\n    return true\n  }\n\n  const lessThan =\n    rates[rate]?.num_power_periods > rates[rate][limit]?.num_periods_apply\n      ? 'SOME_PERIOD_MORE_THAN'\n      : 'POWER_NO_LESS_THAN'\n\n  return createError({\n    message: t(limit.match('min') ? lessThan : 'POWER_NO_MORE_THAN', {\n      value: rates[rate][limit]?.power\n    })\n  })\n}\n\nexport const templateData = {\n  token: 'no-token',\n  installed_power: '3.5',\n  cil: 'ES13984U932824DF',\n  installation_type: 'Red interior',\n  subsection: 'Con excedentes y mecanismo de compensación simplificado',\n  cau: 'ES1334985UDSFW984U932824DF',\n  collective: false,\n  generator_technology:\n    '[B11] - Instalaciones que únicamente utilicen la radiación solar como energía primaria mediante la tecnología fotovoltaica',\n  ssaa: 'true',\n  register_section: 'Con excedentes',\n  to_validate: true,\n  case_id: '',\n}\n\nexport const normalizeContribution = (data, signaturitData) => {\n  const contribution = {}\n  contribution.socinumber = data?.member?.number\n  contribution.dni = data?.member?.vat\n  contribution.accountbankiban = data?.payment?.iban\n  contribution.amount = parseInt(data?.payment?.amount)\n  if(signaturitData){\n    contribution.socinumber = data?.member?.partner_number\n    contribution.signaturit = data?.signaturit\n    contribution.mandate_name = data?.mandate_name\n    contribution.acceptaccountowner = \"1\"\n  }\n  else{\n    contribution.acceptaccountowner = data?.payment?.sepa_accepted ? 1 : 0  \n  }\n  return contribution\n}\n\nexport const getNextNBussinesDays = (day, n, marketHolidays) => {\n  var isoWeek = require('dayjs/plugin/isoWeek')\n  dayjs.extend(isoWeek)\n  const today = dayjs(day)\n  var result = []\n  for (var i=1; result.length<n; i++) {\n    var consideredDay = today.add(i, 'day')\n    const weekday = consideredDay.isoWeekday()\n    if (weekday === 6) continue // saturday\n    if (weekday === 7) continue // sunday\n    const iso = consideredDay.format('YYYY-MM-DD')\n    if (marketHolidays.includes(iso)) continue\n\n    result.push(iso)\n  }\n  return result\n}\n\nexport const checkIsTariff20 = (tariff) => {\n  const regex = new RegExp(/^[\\w\\s]*(2\\.0)\\w*/g)\n  return regex.test(tariff)\n}\nexport const checkIsTariff30 = (tariff) => {\n  const regex = new RegExp(/^[\\w\\s]*(3\\.0)\\w*/g)\n  return regex.test(tariff)\n}\nexport const checkIsTariffIndexed = (tariff) => {\n  return tariff.toLowerCase().match(/ndex/)\n}\n\nexport const isHomeOwnerCommunityNif = (nif) => {\n  return /^H/.test(nif)\n}\n\n"],"names":["THOUSANDS_CONVERSION_FACTOR","CNAE_HOUSING","PAYMENT_METHOD_PAYMENT_ORDER","NEW_MEMBER_CONTRIB_AMOUNT","languages","es_ES","ca_ES","contributionParams","generationMinAnnualUse","generationMinNumActions","generationMaxNumActions","minContribution","maxContribution","contributionStep","maxPercentOverAnnualUse","sanitizeData","data","Object","keys","forEach","key","Array","isArray","length","normalizeCommonModifyData","params","modify","contact","phase","phases","attachments","power_attachments","power_p1","changePower","Math","round","power","undefined","power_p2","power2","power_p3","moreThan15Kw","power3","power_p4","power4","power_p5","power5","power_p6","power6","tariff","contact_name","contactName","contact_surname","contactSurname","contact_phone","phone","normalizeModifyData","normalizeD1ConfirmationData","values","contractModification","confirm","validate","d1Attachments","refuse_reason","refuseReason","contract_modification","checkPhisicalVAT","vat","firstchar","indexOf","normalizeHolderChange","contract","normalContract","JSON","parse","stringify","supply_point","verified","supply_point_accepted","status","holder","language","code","state","id","parseInt","city","vatexists","vatvalid","isphisical","proxynif","proxyname","surname1","surname2","proxynif_phisical","address","number","floor","door","trim","phone2","proxynif_valid","member","name","postal_code","email","phone1","checked","full_name","ismember","become_member","link_member","isHomeOwnerCommunityNif","legal_person_accepted","payment","iban","split","join","iban_valid","especial_cases","reason_default","map","prop","reduce","prev","current","death","medical","resident","merge","normalizeContract","finalContract","member_number","member_vat","cups","is_indexed","isIndexed","rate","rates","getRates","num_power_periods","period","periodAttr","periodKey","toString","cups_address","cups_postal_code","cups_city_id","cups_state_id","cups_cadastral_reference","cadastral_reference","replace","cnae","owner_is_member","contract_owner","is_juridic","surname","proxy_vat","proxy_name","city_id","state_id","lang","privacy_conditions","privacy_policy_accepted","owner_is_payer","contract_payer","payment_iban","sepa_conditions","sepa_accepted","donation","voluntary_cent","process","has_service","previous_holder","general_contract_terms_accepted","terms_accepted","indexed_specific_terms_accepted","particular_contract_terms_accepted","self_consumption","have_installation","cau","collective_installation","installation_power","installation_type","technology","aux_services","normalizeMember","finalMember","tipuspersona","nom","dni","tel","tel2","cp","provincia","adreca","municipi","idioma","payment_method","urlok","urlko","cognoms","cognom","representant_nom","representant_dni","calculateTariff","testPowerForPeriods","limit","createError","t","valids","inLimit","i","attr","match","num_periods_apply","lessThan","message","value","templateData","token","installed_power","cil","subsection","collective","generator_technology","ssaa","register_section","to_validate","case_id","normalizeContribution","signaturitData","contribution","socinumber","accountbankiban","amount","partner_number","signaturit","mandate_name","acceptaccountowner","getNextNBussinesDays","day","n","marketHolidays","isoWeek","require","dayjs","today","result","consideredDay","add","weekday","isoWeekday","iso","format","includes","push","checkIsTariff20","RegExp","test","checkIsTariff30","checkIsTariffIndexed","toLowerCase","nif"],"sourceRoot":""}